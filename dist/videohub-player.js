this.VideoPlayer=function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(t,r){n(3),n(1),n(5),n(2),n(4),n(2),n(10),n(7),n(8),n(12),n(11),n(14),n(13);var a=function(e,n){var r={pluginConfig:{vpbc:{vpHost:"http://us-theonion.videoplaza.tv",optional:{playlistAutoPlay:!0,flashTimeout:3,skip:{timeout:3,text:"Skip Ad"},muteButton:{html:!1,flash:!0}},vpContentForm:"shortForm"},autoplayToggle:{namespace:"onionstudios"},sharetools:{showOnPause:!0,embed:function(e){return'<iframe name="embedded" allowfullscreen webkitallowfullscreen mozallowfullscreen frameborder="no" width="480" height="270" scrolling="no" src="http://'+document.location.host+"/embed?id="+e.videoId+'"></iframe>'},facebook:function(e){return"https://www.facebook.com/sharer/sharer.php?u="+e.shareUrl},twitter:function(e){return"https://twitter.com/share?url="+e.shareUrl+"&via="+e.shareTwitterHandle}}},nativeControlsForTouch:t.any,autoplay:!0,mute:!1,adsEnabled:!0};this.element=e,this.settings=$.extend(!0,r,n),this.setCustomOptions(),this.playedOnce=!1,this.preventWeakPlay=!1,this.preventWeakMute=!1,this.ignoreAutoplay=!1,this.bindEventHandlerContext(),this.player=videojs(e,this.settings),this.setupPlugins(),this.player.ready(this.playerReady.bind(this))};a.prototype.bindEventHandlerContext=function(){this.handleMessagePlay=this.handleMessagePlay.bind(this),this.handleMessagePause=this.handleMessagePause.bind(this),this.handleMessageVolume=this.handleMessageVolume.bind(this),this.handleMessageMuteWeak=this.handleMessageMuteWeak.bind(this),this.handleMessagePauseAllowWeakPlay=this.handleMessagePauseAllowWeakPlay.bind(this),this.handleMessagePlayWeak=this.handleMessagePlayWeak.bind(this)},a.prototype.isEmbedPlayer=function(){return window.location.pathname.match(/embed/i)},a.prototype.isAutoplayEnabled=function(){var e=this.settings.autoplay;return this.storedAutoplay=videojs.autoplaySettingFromStorage({namespace:this.settings.pluginConfig.autoplayToggle.namespace}),this.isEmbedPlayer()?e=!1:videojs.hasOwnProperty("autoplaySettingFromStorage")&&(e=this.storedAutoplay&&this.settings.autoplay),e},a.prototype.setCustomOptions=function(){this.settings.embed=this.isEmbedPlayer(),this.settings.autoplay=this.isAutoplayEnabled(),window.AnalyticsManager?(window.AnalyticsManager.sendEvent({eventCategory:"Video:"+window.channelName,eventAction:"autoplay",eventLabel:this.settings.autoplay}),window.AnalyticsManager.sendEvent({eventCategory:"Video:"+window.channelName,eventAction:"storedAutoplay",eventLabel:this.storedAutoplay})):console.error("AnalyticsManager unavailable"),ga("set","dimension8",this.settings.autoplay)},a.prototype.setupPlugins=function(){this.setupPulsePlugin(),this.setupShareToolsPlugin(),this.setupAutoplayTogglePlugin(),this.setupEndCardPlugin(),this.setupVideoMetrixPlugin()},a.prototype.setupPulsePlugin=function(){this.settings.adsEnabled&&this.player.vpbc(this.settings.pluginConfig.vpbc)},a.prototype.setupAutoplayTogglePlugin=function(){this.player.autoplayToggle({namespace:this.settings.pluginConfig.autoplayToggle.namespace})},a.prototype.setupShareToolsPlugin=function(){if(this.settings.isDiscoverable){var e=$.extend({videoId:this.settings.videoId},this.settings.pluginConfig.sharetools);this.player.sharetools(e)}},a.prototype.setupEndCardPlugin=function(){this.player.endcard(this.settings.pluginConfig.endcard)},a.prototype.setupVideoMetrixPlugin=function(){this.player.videometrix(this.settings.pluginConfig.videometrix)},a.prototype.setupCustomAnalyticsPlugin=function(){this.player.videoanalytics(this.settings.pluginConfig.videoanalytics)},a.prototype.setupGoogleAnalyticsPlugin=function(){this.player.ga({eventActionPrefix:"video_",percentsPlayedInterval:25,eventCategory:"Video:"+window.channelName,eventLabel:window.videoUrl})},a.prototype.playerReady=function(){var e=this.player;this.settings.mute&&e.muted(!0),r.any&&e.controlBar.hide(),this.setupCustomAnalyticsPlugin(),this.setupGoogleAnalyticsPlugin(),this.settings.embed&&(this.sendParentPlayerEvents(),this.initMessageEventListeners()),this.initPlayerEventListeners()},a.prototype.initPlayerEventListeners=function(){var e=this;this.player.on("play",function(){e.playedOnce=!0}),this.player.on("pause",function(){e.preventWeakPlay=!0}),this.player.on("volumechange",function(){e.preventWeakMute=!0}),this.player.on("adstart",function(){e.ignoreAutoplay=!0}),this.settings.embed&&this.player.on("dispose",function(){e.messageHandler&&window.removeEventListener("message",e.messageHandler)})},a.prototype.isPulseAdPlaying=function(){return this.player.vpApi&&"ad-playback"===this.player.ads.state},a.prototype.handleMessagePlay=function(){this.player.el()&&this.resumePlay()},a.prototype.handleMessagePause=function(){this.player.el()&&(this.isPulseAdPlaying()?this.player.vpApi.pauseAd():this.player.pause())},a.prototype.handleMessageVolume=function(e){this.player.el()&&this.player.volume(e)},a.prototype.handleMessageMuteWeak=function(){if(this.player.el()&&!this.player.muted()&&!this.preventWeakMute){var e=this;this.player.one("volumechange",function(){e.preventWeakMute=!1}),this.player.muted(!0)}},a.prototype.handleMessagePauseAllowWeakPlay=function(){var e=this.player;e.el()&&(e.paused()?this.isPulseAdPlaying()&&e.vpApi.pauseAd():(e.one("pause",function(){preventWeakPlay=!1}),e.pause()))},a.prototype.resumePlay=function(){this.isPulseAdPlaying()?this.player.vpApi.resumeAd():this.player.play()},a.prototype.handleMessagePlayWeak=function(){this.player.el()&&(this.playedOnce&&this.preventWeakPlay||!this.ignoreAutoplay&&!this.isAutoplayEnabled()||!this.player.paused()||this.resumePlay())},a.prototype.initMessageEventListeners=function(){var e=this.player;e.messageHandlers={play:this.handleMessagePlay,pause:this.handleMessagePause,setVolume:this.handleMessageVolume,muteWeak:this.handleMessageMuteWeak,pauseAllowWeakPlay:this.handleMessagePauseAllowWeakPlay,playWeak:this.handleMessagePlayWeak},this.messageHandler=function(t){t.data.name in e.messageHandlers&&e.messageHandlers[t.data.name](t.data.params)},window.addEventListener("message",this.messageHandler)},a.prototype.sendParentPlayerEvents=function(){window.parent&&(this.player.on("play",function(){window.parent.postMessage({name:"video-play"},"*")}),this.player.on("pause",function(){window.parent.postMessage({name:"video-pause"},"*")}),this.player.on("replay",function(){window.parent.postMessage({name:"video-replay"},"*")}))},e.exports=a}).call(t,n(1),n(1))},function(e,t,n){var r,a,i;/**
	 * isMobile.js v0.4.0
	 *
	 * A simple library to detect Apple phones and tablets,
	 * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),
	 * and any kind of seven inch device, via user agent sniffing.
	 *
	 * @author: Kai Mallea (kmallea@gmail.com)
	 *
	 * @license: http://creativecommons.org/publicdomain/zero/1.0/
	 */
!function(n){var o=/iPhone/i,s=/iPod/i,l=/iPad/i,u=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,c=/Android/i,d=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,p=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,f=/IEMobile/i,h=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,g=/BlackBerry/i,v=/BB10/i,m=/Opera Mini/i,y=/(CriOS|Chrome)(?=.*\bMobile\b)/i,b=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,w=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),_=function(e,t){return e.test(t)},k=function(e){var t=e||navigator.userAgent,n=t.split("[FBAN");return"undefined"!=typeof n[1]&&(t=n[0]),n=t.split("Twitter"),"undefined"!=typeof n[1]&&(t=n[0]),this.apple={phone:_(o,t),ipod:_(s,t),tablet:!_(o,t)&&_(l,t),device:_(o,t)||_(s,t)||_(l,t)},this.amazon={phone:_(d,t),tablet:!_(d,t)&&_(p,t),device:_(d,t)||_(p,t)},this.android={phone:_(d,t)||_(u,t),tablet:!_(d,t)&&!_(u,t)&&(_(p,t)||_(c,t)),device:_(d,t)||_(p,t)||_(u,t)||_(c,t)},this.windows={phone:_(f,t),tablet:_(h,t),device:_(f,t)||_(h,t)},this.other={blackberry:_(g,t),blackberry10:_(v,t),opera:_(m,t),firefox:_(b,t),chrome:_(y,t),device:_(g,t)||_(v,t)||_(m,t)||_(b,t)||_(y,t)},this.seven_inch=_(w,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},T=function(){var e=new k;return e.Class=k,e};"undefined"!=typeof e&&e.exports&&"undefined"==typeof window?e.exports=k:"undefined"!=typeof e&&e.exports&&"undefined"!=typeof window?e.exports=T():(a=[],r=n.isMobile=T(),i="function"==typeof r?r.apply(t,a):r,!(void 0!==i&&(e.exports=i)))}(this)},function(e,t){"use strict";!function(e,t,n){var r={getItem:function(e){return e?decodeURIComponent(t.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(e,n,r,a,i,o){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="";if(r)switch(r.constructor){case Number:s=r===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+r;break;case String:s="; expires="+r;break;case Date:s="; expires="+r.toUTCString()}return t.cookie=encodeURIComponent(e)+"="+encodeURIComponent(n)+s+(i?"; domain="+i:"")+(a?"; path="+a:"")+(o?"; secure":""),!0},removeItem:function(e,n,r){return this.hasItem(e)?(t.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(r?"; domain="+r:"")+(n?"; path="+n:""),!0):!1},hasItem:function(e){return e?new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(t.cookie):!1}},a={available:function(){try{return e.localStorage.setItem("fishingForLocalStorage","itsHere"),e.localStorage.removeItem("fishingForLocalStorage"),!0}catch(t){return!1}},getItem:function(t){return e.localStorage.getItem(t)},setItem:function(t,n){return e.localStorage.setItem(t,n)},removeItem:function(t){return e.localStorage.removeItem(t)}},i={getItem:function(e){return a.available()?a.getItem(e):r.getItem(e)},setItem:function(e,t){return a.available()?a.setItem(e,t):r.setItem(e,t,1/0,"/"),t},removeItem:function(e){a.available()?a.removeItem(e):r.removeItem(e)}},o=function(e){var t,n,r;for(n=1;n<arguments.length;n++){t=arguments[n];for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}return e},s={namespace:"autoplay-toggle"},l=function(e){var n=this,r=o({},s,e||{}),a=r.namespace+"-autoplay",l=t.createElement("div");l.className="vjs-autoplay-toggle-button vjs-menu-button vjs-control",l.innerHTML='<div><span class="vjs-control-text">Autoplay:<br><span class="autoplay-toggle autoplay-toggle-active autoplay-on">On</span>&nbsp;/&nbsp;<span class="autoplay-toggle autoplay-off">Off</span></span>',n.controlBar.el().appendChild(l);var u=function(e){e?i.removeItem(a):i.setItem(a,"no");for(var n=t.querySelectorAll(".video-js"),r=0;r<n.length;r++){var o=n[r].querySelectorAll(".vjs-autoplay-toggle-button");if(o.length>0){var s=o[0],l=s.querySelectorAll(".autoplay-on")[0],u=s.querySelectorAll(".autoplay-off")[0];e?(l.className="autoplay-toggle autoplay-toggle-active autoplay-on",u.className="autoplay-toggle autoplay-off"):(l.className="autoplay-toggle autoplay-on",u.className="autoplay-toggle autoplay-toggle-active autoplay-off")}}},c=!i.getItem(a);return n.autoplay()&&!c?(n.autoplay(!1),n.pause()):n.autoplay()&&c&&n.play(),u(c),l.onclick=function(){var e=!!i.getItem(a);u(e)},n};n.plugin("autoplayToggle",l),n.autoplaySettingFromStorage=function(e){var t=o({},s,e||{}),n=t.namespace+"-autoplay";return!i.getItem(n)}}(window,document,videojs)},function(e,t){!function(e){"use strict";e.fn.succinct=function(t){var n=e.extend({size:240,omission:"...",ignore:!0},t);return this.each(function(){var t,r,a=e(this),i=/[!-\/:-@\[-`{-~]$/,o=function(){a.each(function(){t=e(this).html(),t.length>n.size&&(r=e.trim(t).substring(0,n.size).split(" ").slice(0,-1).join(" "),n.ignore&&(r=r.replace(i,"")),e(this).html(r+n.omission))})};o()})}}(jQuery)},function(e,t){(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};videojs.plugin("ga",function(t){var n,r,a,i,o,s,l,u,c,d,p,f,h,g,v,m,y,b,w,_,k;return null==t&&(t={}),n={},this.options()["data-setup"]&&(d=JSON.parse(this.options()["data-setup"]),d.ga&&(n=d.ga)),r=["loaded","percentsPlayed","start","end","seek","play","pause","resize","volumeChange","error","fullscreen"],l=t.eventsToTrack||n.eventsToTrack||r,h=t.percentsPlayedInterval||n.percentsPlayedInterval||10,o=t.eventCategory||n.eventCategory||"Video",s=t.eventLabel||n.eventLabel,t.debug=t.debug||!1,f=[],y=m=0,b=!1,c=function(){s||(s=this.currentSrc().split("/").slice(-1)[0].replace(/\.(\w{3,4})(\?.*)?$/i,"")),e.call(l,"loadedmetadata")>=0&&w("loadedmetadata",!0)},_=function(){var t,n,r,a,i;for(t=Math.round(this.currentTime()),n=Math.round(this.duration()),a=Math.round(t/n*100),r=i=0;99>=i;r=i+=h)a>=r&&e.call(f,r)<0&&(e.call(l,"start")>=0&&0===r&&a>0?w("start",!0):e.call(l,"percentsPlayed")>=0&&0!==a&&w("percent played",!0,r),a>0&&f.push(r));e.call(l,"seek")>=0&&(y=m,m=t,Math.abs(y-m)>1&&(b=!0,w("seek start",!1,y),w("seek end",!1,m)))},a=function(){w("end",!0)},g=function(){var e;e=Math.round(this.currentTime()),w("play",!0,e),b=!1},p=function(){var e,t;e=Math.round(this.currentTime()),t=Math.round(this.duration()),e===t||b||w("pause",!1,e)},k=function(){var e;e=this.muted()===!0?0:this.volume(),w("volume change",!1,e)},v=function(){w("resize - "+this.width()+"*"+this.height(),!0)},i=function(){var e;e=Math.round(this.currentTime()),w("error",!0,e)},u=function(){var e;e=Math.round(this.currentTime()),("function"==typeof this.isFullscreen?this.isFullscreen():void 0)||("function"==typeof this.isFullScreen?this.isFullScreen():void 0)?w("enter fullscreen",!1,e):w("exit fullscreen",!1,e)},w=function(e,n,r){window.ga?ga("send","event",{eventCategory:o,eventAction:e,eventLabel:s,eventValue:r,nonInteraction:n}):window._gaq?_gaq.push(["_trackEvent",o,e,s,r,n]):t.debug&&console.log("Google Analytics not detected")},this.ready(function(){return this.on("loadedmetadata",c),this.on("timeupdate",_),e.call(l,"end")>=0&&this.on("ended",a),e.call(l,"play")>=0&&this.on("play",g),e.call(l,"pause")>=0&&this.on("pause",p),e.call(l,"volumeChange")>=0&&this.on("volumechange",k),e.call(l,"resize")>=0&&this.on("resize",v),e.call(l,"error")>=0&&this.on("error",i),e.call(l,"fullscreen")>=0?this.on("fullscreenchange",u):void 0}),{sendbeacon:w}})}).call(this)},function(e,t,n){var r,r;(function(e){!function t(e,n,a){function i(s,l){if(!n[s]){if(!e[s]){var u="function"==typeof r&&r;if(!l&&u)return r(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return i(n?n:t)},d,d.exports,t,e,n,a)}return n[s].exports}for(var o="function"==typeof r&&r,s=0;s<a.length;s++)i(a[s]);return i}({1:[function(t,n,r){(function(e){(function(e,t,n,r,a){/*!    SWFObject v2.3.20130521 <http://github.com/swfobject/swfobject>
	    is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
	*/
var i=function(){function e(){if(!G&&document.getElementsByTagName("body")[0]){try{var e,t=y("span");t.style.display="none",e=O.getElementsByTagName("body")[0].appendChild(t),e.parentNode.removeChild(e),e=null,t=null}catch(n){return}G=!0;for(var r=j.length,a=0;r>a;a++)j[a]()}}function t(e){G?e():j[j.length]=e}function n(e){if(typeof B.addEventListener!=N)B.addEventListener("load",e,!1);else if(typeof O.addEventListener!=N)O.addEventListener("load",e,!1);else if(typeof B.attachEvent!=N)w(B,"onload",e);else if("function"==typeof B.onload){var t=B.onload;B.onload=function(){t(),e()}}else B.onload=e}function r(){var e=O.getElementsByTagName("body")[0],t=y(x);t.setAttribute("style","visibility: hidden;"),t.setAttribute("type",U);var n=e.appendChild(t);if(n){var r=0;!function i(){if(typeof n.GetVariable!=N)try{var o=n.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),Y.pv=[b(o[0]),b(o[1]),b(o[2])])}catch(s){Y.pv=[8,0,0]}else if(10>r)return r++,void setTimeout(i,10);e.removeChild(t),n=null,a()}()}else a()}function a(){var e=$.length;if(e>0)for(var t=0;e>t;t++){var n=$[t].id,r=$[t].callbackFn,a={success:!1,id:n};if(Y.pv[0]>0){var i=m(n);if(i)if(!_($[t].swfVersion)||Y.wk&&Y.wk<312)if($[t].expressInstall&&s()){var c={};c.data=$[t].expressInstall,c.width=i.getAttribute("width")||"0",c.height=i.getAttribute("height")||"0",i.getAttribute("class")&&(c.styleclass=i.getAttribute("class")),i.getAttribute("align")&&(c.align=i.getAttribute("align"));for(var d={},p=i.getElementsByTagName("param"),f=p.length,h=0;f>h;h++)"movie"!=p[h].getAttribute("name").toLowerCase()&&(d[p[h].getAttribute("name")]=p[h].getAttribute("value"));l(c,d,n,r)}else u(i),r&&r(a);else T(n,!0),r&&(a.success=!0,a.ref=o(n),a.id=n,r(a))}else if(T(n,!0),r){var g=o(n);g&&typeof g.SetVariable!=N&&(a.success=!0,a.ref=g,a.id=g.id),r(a)}}}function o(e){var t=null,n=m(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=typeof n.SetVariable!==N?n:n.getElementsByTagName(x)[0]||n),t}function s(){return!W&&_("6.0.65")&&(Y.win||Y.mac)&&!(Y.wk&&Y.wk<312)}function l(e,t,n,r){var a=m(n);if(n=v(n),W=!0,P=r||null,S={success:!1,id:n},a){"OBJECT"==a.nodeName.toUpperCase()?(A=c(a),C=null):(A=a,C=n),e.id=F,(typeof e.width==N||!/%$/.test(e.width)&&b(e.width)<310)&&(e.width="310"),(typeof e.height==N||!/%$/.test(e.height)&&b(e.height)<137)&&(e.height="137");var i=Y.ie?"ActiveX":"PlugIn",o="MMredirectURL="+encodeURIComponent(B.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+i+"&MMdoctitle="+encodeURIComponent(O.title.slice(0,47)+" - Flash Player Installation");if(typeof t.flashvars!=N?t.flashvars+="&"+o:t.flashvars=o,Y.ie&&4!=a.readyState){var s=y("div");n+="SWFObjectNew",s.setAttribute("id",n),a.parentNode.insertBefore(s,a),a.style.display="none",h(a)}p(e,t,n)}}function u(e){if(Y.ie&&4!=e.readyState){e.style.display="none";var t=y("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(c(e),t),h(e)}else e.parentNode.replaceChild(c(e),e)}function c(e){var t=y("div");if(Y.win&&Y.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(x)[0];if(n){var r=n.childNodes;if(r)for(var a=r.length,i=0;a>i;i++)1==r[i].nodeType&&"PARAM"==r[i].nodeName||8==r[i].nodeType||t.appendChild(r[i].cloneNode(!0))}}return t}function d(e,t){var n=y("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",n.firstChild}function p(e,t,n){var r,a=m(n);if(n=v(n),Y.wk&&Y.wk<312)return r;if(a){var i,o,s,l=y(Y.ie?"div":x);typeof e.id==N&&(e.id=n);for(s in t)t.hasOwnProperty(s)&&"movie"!==s.toLowerCase()&&f(l,s,t[s]);Y.ie&&(l=d(e.data,l.innerHTML));for(i in e)e.hasOwnProperty(i)&&(o=i.toLowerCase(),"styleclass"===o?l.setAttribute("class",e[i]):"classid"!==o&&"data"!==o&&l.setAttribute(i,e[i]));Y.ie?H[H.length]=e.id:(l.setAttribute("type",U),l.setAttribute("data",e.data)),a.parentNode.replaceChild(l,a),r=l}return r}function f(e,t,n){var r=y("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function h(e){var t=m(e);t&&"OBJECT"==t.nodeName.toUpperCase()&&(Y.ie?(t.style.display="none",function n(){if(4==t.readyState){for(var e in t)"function"==typeof t[e]&&(t[e]=null);t.parentNode.removeChild(t)}else setTimeout(n,10)}()):t.parentNode.removeChild(t))}function g(e){return e&&e.nodeType&&1===e.nodeType}function v(e){return g(e)?e.id:e}function m(e){if(g(e))return e;var t=null;try{t=O.getElementById(e)}catch(n){}return t}function y(e){return O.createElement(e)}function b(e){return parseInt(e,10)}function w(e,t,n){e.attachEvent(t,n),z[z.length]=[e,t,n]}function _(e){e+="";var t=Y.pv,n=e.split(".");return n[0]=b(n[0]),n[1]=b(n[1])||0,n[2]=b(n[2])||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function k(e,t,n,r){var a=O.getElementsByTagName("head")[0];if(a){var i="string"==typeof n?n:"screen";if(r&&(I=null,L=null),!I||L!=i){var o=y("style");o.setAttribute("type","text/css"),o.setAttribute("media",i),I=a.appendChild(o),Y.ie&&typeof O.styleSheets!=N&&O.styleSheets.length>0&&(I=O.styleSheets[O.styleSheets.length-1]),L=i}I&&(typeof I.addRule!=N?I.addRule(e,t):typeof O.createTextNode!=N&&I.appendChild(O.createTextNode(e+" {"+t+"}")))}}function T(e,t){if(K){var n=t?"visible":"hidden",r=m(e);G&&r?r.style.visibility=n:"string"==typeof e&&k("#"+e,"visibility:"+n)}}function E(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=N?encodeURIComponent(e):e}var A,C,P,S,I,L,N="undefined",x="object",M="Shockwave Flash",V="ShockwaveFlash.ShockwaveFlash",U="application/x-shockwave-flash",F="SWFObjectExprInst",R="onreadystatechange",B=window,O=document,D=navigator,q=!1,j=[],$=[],H=[],z=[],G=!1,W=!1,K=!0,X=!1,Y=function(){var e=typeof O.getElementById!=N&&typeof O.getElementsByTagName!=N&&typeof O.createElement!=N,t=D.userAgent.toLowerCase(),n=D.platform.toLowerCase(),r=n?/win/.test(n):/win/.test(t),a=n?/mac/.test(n):/mac/.test(t),i=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,o="Microsoft Internet Explorer"===D.appName,s=[0,0,0],l=null;if(typeof D.plugins!=N&&typeof D.plugins[M]==x)l=D.plugins[M].description,l&&typeof D.mimeTypes!=N&&D.mimeTypes[U]&&D.mimeTypes[U].enabledPlugin&&(q=!0,o=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=b(l.replace(/^(.*)\..*$/,"$1")),s[1]=b(l.replace(/^.*\.(.*)\s.*$/,"$1")),s[2]=/[a-zA-Z]/.test(l)?b(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof B.ActiveXObject!=N)try{var u=new ActiveXObject(V);u&&(l=u.GetVariable("$version"),l&&(o=!0,l=l.split(" ")[1].split(","),s=[b(l[0]),b(l[1]),b(l[2])]))}catch(c){}return{w3:e,pv:s,wk:i,ie:o,win:r,mac:a}}();(function(){Y.w3&&((typeof O.readyState!=N&&("complete"===O.readyState||"interactive"===O.readyState)||typeof O.readyState==N&&(O.getElementsByTagName("body")[0]||O.body))&&e(),G||(typeof O.addEventListener!=N&&O.addEventListener("DOMContentLoaded",e,!1),Y.ie&&(O.attachEvent(R,function t(){"complete"==O.readyState&&(O.detachEvent(R,t),e())}),B==top&&!function n(){if(!G){try{O.documentElement.doScroll("left")}catch(t){return void setTimeout(n,0)}e()}}()),Y.wk&&!function r(){return G?void 0:/loaded|complete/.test(O.readyState)?void e():void setTimeout(r,0)}()))})();j[0]=function(){q?r():a()};(function(){Y.ie&&window.attachEvent("onunload",function(){for(var e=z.length,t=0;e>t;t++)z[t][0].detachEvent(z[t][1],z[t][2]);for(var n=H.length,r=0;n>r;r++)h(H[r]);for(var a in Y)Y[a]=null;Y=null;for(var o in i)i[o]=null;i=null})})();return{registerObject:function(e,t,n,r){if(Y.w3&&e&&t){var a={};a.id=e,a.swfVersion=t,a.expressInstall=n,a.callbackFn=r,$[$.length]=a,T(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){return Y.w3?o(e):void 0},embedSWF:function(e,n,r,a,i,o,u,c,d,f){var h=v(n),g={success:!1,id:h};Y.w3&&!(Y.wk&&Y.wk<312)&&e&&n&&r&&a&&i?(T(h,!1),t(function(){r+="",a+="";var t={};if(d&&typeof d===x)for(var v in d)t[v]=d[v];t.data=e,t.width=r,t.height=a;var m={};if(c&&typeof c===x)for(var y in c)m[y]=c[y];if(u&&typeof u===x)for(var b in u)if(u.hasOwnProperty(b)){var w=X?encodeURIComponent(b):b,k=X?encodeURIComponent(u[b]):u[b];typeof m.flashvars!=N?m.flashvars+="&"+w+"="+k:m.flashvars=w+"="+k}if(_(i)){var E=p(t,m,n);t.id==h&&T(h,!0),g.success=!0,g.ref=E,g.id=E.id}else{if(o&&s())return t.data=o,void l(t,m,n,f);T(h,!0)}f&&f(g)})):f&&f(g)},switchOffAutoHideShow:function(){K=!1},enableUriEncoding:function(e){X=typeof e===N?!0:e},ua:Y,getFlashPlayerVersion:function(){return{major:Y.pv[0],minor:Y.pv[1],release:Y.pv[2]}},hasFlashPlayerVersion:_,createSWF:function(e,t,n){return Y.w3?p(e,t,n):void 0},showExpressInstall:function(e,t,n,r){Y.w3&&s()&&l(e,t,n,r)},removeSWF:function(e){Y.w3&&h(e)},createCSS:function(e,t,n,r){Y.w3&&k(e,t,n,r)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=O.location.search||O.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return E(t);for(var n=t.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return E(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(W){var e=m(F);e&&A&&(e.parentNode.replaceChild(A,e),C&&(T(C,!0),Y.ie&&(A.style.display="block")),P&&P(S)),W=!1}},version:"2.3"}}();a("undefined"!=typeof i?i:window.swfobject)}).call(e,void 0,void 0,void 0,void 0,function(e){n.exports=e})}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,n,r){(function(e){(function(e,t,n,r,a){!function(e,t,n,r){"use strict";var a=function(e){var t,n,r;for(n=1;n<arguments.length;n++){t=arguments[n];for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}return e},i=function(e,t,n){var r,a,i=Object.prototype.toString.call(t),o=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n);else if(e.on)e.on(t,n);else{if(!e.attachEvent)throw new Error("object has no mechanism for adding event listeners");e.attachEvent("on"+t,n)}};switch(i){case"[object String]":o(e,t,n);break;case"[object Array]":for(r=0,a=t.length;a>r;r++)o(e,t[r],n);break;case"[object Object]":for(r in t)t.hasOwnProperty(r)&&o(e,r,t[r]);break;default:throw new Error("Unrecognized events parameter type: "+i)}return e},o=function(t){return(e.setImmediate||e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.setTimeout)(t,0)},s=function(t){return(e.clearImmediate||e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.clearTimeout)(t)},l=function(e){e.ads.cancelPlayTimeout||(e.ads.cancelPlayTimeout=o(function(){e.ads.cancelPlayTimeout=null,e.paused()||e.pause(),e.one("contentplayback",function(){e.paused()&&e.play()})}))},u=function(e){var t,n,r=e.el().querySelector(".vjs-tech"),a=e.remoteTextTracks?e.remoteTextTracks():[],i=[],o={ended:e.ended(),src:e.currentSrc(),currentTime:e.currentTime(),type:e.currentType()};for(r&&(o.nativePoster=r.poster,o.style=r.getAttribute("style")),n=a.length;n--;)t=a[n],i.push({track:t,mode:t.mode}),t.mode="disabled";return o.suppressedTracks=i,o},c=function(e,t){for(var n=e.className.split(/\s+/),r=n.length,a=[];r--;)n[r]!==t&&a.push(n[r]);e.className=a.join(" ")},d=function(t,n){var a,i,o=t.el().querySelector(".vjs-tech"),s=20,l=n.suppressedTracks,u=function(){for(var e=l.length;e--;)a=l[e],a.track.mode=a.mode},c=function(){var r=!1,a=function(){r=!0};t.currentTime(n.currentTime),n.ended?(e.setTimeout(function(){r||t.play(),t.off("ended",a)},250),t.on("ended",a)):t.play()},d=function(){return o.readyState>1?c():o.seekable===r?c():o.seekable.length>0?c():void(s--?setTimeout(d,50):!function(){try{c()}catch(e){videojs.log.warn("Failed to resume the content after an advertisement",e)}}())};n.nativePoster&&(o.poster=n.nativePoster),"style"in n&&o.setAttribute("style",n.style||""),i=t.src()?t.src()!==n.src:t.currentSrc()!==n.src,i?(t.one("contentloadedmetadata",u),t.src({src:n.src,type:n.type}),t.load(),t.one("contentcanplay",d)):t.ended()&&n.ended||(u(),t.play())},p=function(e){var t=e.el().querySelector(".vjs-tech");t&&t.removeAttribute("poster")},f={timeout:5e3,prerollTimeout:100,postrollTimeout:100,debug:!1},h=function(t){var r,h=this,g=a({},f,t||{});!function(){var e,t=videojs.Html5.Events,n=function(){return!0},r=function(e,t){t.isImmediatePropagationStopped=n,t.cancelBubble=!0,t.isPropagationStopped=n,h.trigger({type:e+t.type,state:h.ads.state,originalEvent:t})},a=function(e){if("ad-playback"===h.ads.state)r("ad",e);else if("content-playback"===h.ads.state&&"ended"===e.type)r("content",e);else if("content-resuming"===h.ads.state){if(h.ads.snapshot){if(h.currentSrc()!==h.ads.snapshot.src){if("loadstart"===e.type)return;return r("content",e)}if(h.ads.snapshot.ended)return"pause"===e.type||"ended"===e.type?void h.addClass("vjs-has-started"):r("content",e)}"playing"!==e.type&&r("content",e)}};for(t.push("firstplay"),t.push("loadedalldata"),e=t.length;e--;)h.on(t[e],a);return a}(),h.on(["addurationchange","adcanplay"],function(){var e=h.ads.snapshot;h.currentSrc()!==e.src&&h.play()}),h.ads={state:"content-set",startLinearAdMode:function(){"ad-playback"!==h.ads.state&&h.trigger("adstart")},endLinearAdMode:function(){"ad-playback"===h.ads.state&&h.trigger("adend")},skipLinearAdMode:function(){"ad-playback"!==h.ads.state&&h.trigger("adskip")}},r=function(t){var n={"content-set":{events:{adscanceled:function(){this.state="content-playback"},adsready:function(){this.state="ads-ready"},play:function(){this.state="ads-ready?",l(h),p(h)},adserror:function(){this.state="content-playback"},adskip:function(){this.state="content-playback"}}},"ads-ready":{events:{play:function(){this.state="preroll?",l(h)},adskip:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"preroll?":{enter:function(){h.el().className+=" vjs-ad-loading",h.ads.timeout=e.setTimeout(function(){h.trigger("adtimeout")},g.prerollTimeout),h.trigger("readyforpreroll")},leave:function(){e.clearTimeout(h.ads.timeout),c(h.el(),"vjs-ad-loading")},events:{play:function(){l(h)},adstart:function(){this.state="ad-playback"},adskip:function(){this.state="content-playback"},adtimeout:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"ads-ready?":{enter:function(){h.el().className+=" vjs-ad-loading",h.ads.timeout=e.setTimeout(function(){h.trigger("adtimeout")},g.timeout)},leave:function(){e.clearTimeout(h.ads.timeout),c(h.el(),"vjs-ad-loading")},events:{play:function(){l(h)},adscanceled:function(){this.state="content-playback"},adsready:function(){this.state="preroll?"},adskip:function(){this.state="content-playback"},adtimeout:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"ad-playback":{enter:function(){this.snapshot=u(h),h.el().className+=" vjs-ad-playing",p(h),h.ads.cancelPlayTimeout&&(s(h.ads.cancelPlayTimeout),h.ads.cancelPlayTimeout=null)},leave:function(){c(h.el(),"vjs-ad-playing"),d(h,this.snapshot),"adend"!==h.ads.triggerevent&&h.trigger("adend")},events:{adend:function(){this.state="content-resuming"},adserror:function(){this.state="content-resuming"}}},"content-resuming":{enter:function(){this.snapshot.ended&&(e.clearTimeout(h.ads._fireEndedTimeout),h.ads._fireEndedTimeout=e.setTimeout(function(){h.trigger("ended")},1e3))},leave:function(){e.clearTimeout(h.ads._fireEndedTimeout)},events:{contentupdate:function(){this.state="content-set"},playing:function(){this.state="content-playback"},ended:function(){this.state="content-playback"}}},"postroll?":{enter:function(){this.snapshot=u(h),h.el().className+=" vjs-ad-loading",h.ads.timeout=e.setTimeout(function(){h.trigger("adtimeout")},g.postrollTimeout)},leave:function(){e.clearTimeout(h.ads.timeout),c(h.el(),"vjs-ad-loading")},events:{adstart:function(){this.state="ad-playback"},adskip:function(){this.state="content-resuming",o(function(){h.trigger("ended")})},adtimeout:function(){this.state="content-resuming",o(function(){h.trigger("ended")})},adserror:function(){this.state="content-resuming",o(function(){h.trigger("ended")})}}},"content-playback":{enter:function(){h.ads.cancelPlayTimeout&&(s(h.ads.cancelPlayTimeout),h.ads.cancelPlayTimeout=null),h.trigger({type:"contentplayback",triggerevent:h.ads.triggerevent})},events:{adsready:function(){h.trigger("readyforpreroll")},adstart:function(){this.state="ad-playback"},contentupdate:function(){h.paused()?this.state="content-set":this.state="ads-ready?"},contentended:function(){this.state="postroll?"}}}};!function(e){var r=function(){};((n[e].events||{})[t.type]||r).apply(h.ads),e!==h.ads.state&&(h.ads.triggerevent=t.type,(n[e].leave||r).apply(h.ads),(n[h.ads.state].enter||r).apply(h.ads),g.debug&&videojs.log("ads",h.ads.triggerevent+" triggered: "+e+" -> "+h.ads.state))}(h.ads.state)},i(h,n.Html5.Events.concat(["adtimeout","contentupdate","contentplaying","contentended","adsready","adserror","adscanceled","adstart","adend","adskip"]),r),h.ads.contentSrc=h.currentSrc(),function(){var e=function(){var e;"ad-playback"!==h.ads.state&&(e=h.currentSrc(),e!==h.ads.contentSrc&&(h.trigger({type:"contentupdate",oldValue:h.ads.contentSrc,newValue:e}),h.ads.contentSrc=e))};h.on(["loadstart"],e),o(e)}(),h.paused()||r({type:"play"})};n.plugin("ads",h)}(window,document,videojs),a("undefined"!=typeof contribAds?contribAds:window.contribAds)}).call(e,void 0,void 0,void 0,void 0,function(e){n.exports=e})}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){function r(){"use strict";function e(e,t,r){P=e,S=t,x=r,N=document.getElementById(x).parentNode,n(t),window.vpBridge=window.vpBridge||{},window.vpBridge[x]=m}function t(){return document.getElementById(x)}function n(e){e.optional&&e.optional.flashTimeout&&(V=1e3*e.optional.flashTimeout)}function r(){var e=l();O.playedPreroll=!0,O.postroll=!1,I.sendToFlash("video-start"),M.log("start flash ad",e.width,e.height),I.start(S,e.width,e.height),O.adPlaying=!0,M.log("BRIDGE playPreroll pause video"),P.pause()}function i(){return I&&I.sendToFlash?!0:(F=!1,!1)}function o(){N.className="",P.controlBar.el().style.display=""}function s(){P.pause(),N.className=N.id,I&&I.toggleFullscreen&&I.toggleFullscreen(l().width,l().height,"normal"),P.controlBar.el().style.display="none"}function l(){return{width:P.el().offsetWidth,height:P.el().offsetHeight}}function u(){if(F&&O.adPlaying)if(O.fullscreen){var e=setInterval(function(){s()},50);setTimeout(function(){clearInterval(e)},510),O.fullscreen=!1}else{O.fullscreen=!0;var t=setInterval(function(){s()},50);setTimeout(function(){clearInterval(t)},510)}}function c(){F&&!O.postroll&&(s(),I&&I.sendToFlash&&I.sendToFlash("video-ended"),O.postroll=!0)}function d(){P.pause(),s(),O.adPlaying=!0}function p(){M.log("onPlay ad state",P.ads.state),"ad-playback"===P.ads.state?P.pause():f()?r():h()}function f(){return M.log("canPlayPreroll",i(),F,!O.playedPreroll),i()&&F?O.playedPreroll?!1:!R:!1}function h(){M.log("BRIDGE denyPlay",O.playedAd,R),O.playedAd||R||(U=!0,P.pause(),g())}function g(){M.log("BRIDGE: Start Flash Timeout"),B||(L=setTimeout(function(){M.log("BRIDGE flash timeout hit"),U=!1,R=!0,O.playedPreroll=!0,D||P.play()},V),B=!0)}function v(){M.log("allow play hit but play is not denied"),U&&(M.log("allow play triggerd"),clearInterval(L),U=!1,P.play())}function m(e){switch(e){case"AdPlayerReady":M.log("BRIDGE: AdPlayerReady"),b(),v(),R||P.trigger("adsready");break;case"AdPlayerStart":P.trigger("adsready"),M.log("BRIDGE: AdPlayerStart"),D=!0,d(),M.log("AdPlayerStart"),setTimeout(function(){P.ads.startLinearAdMode()},50);break;case"AdPlayerComplete":P.ads.endLinearAdMode(),O.playedAd=!0,D=!1,y(),M.log("BRIDGE: AdPlayerComplete");break;case"ad-ended":_(e);break;case"ad-failed":_(e);break;case"ad-timeout":_(e);break;case"AdLoaded":M.log("BRIDGE: AdLoaded")}}function y(){O.adPlaying=!1,o(),P.play(),O.postroll&&P.currentTime(P.duration()-.4)}function b(){F=!0,I=t(),T()}function w(e){F&&I&&P&&I.updateTime&&P.currentTime&&I.updateTime(P.currentTime())}function _(e){M.log(e)}function k(e){I&&T()}function T(){0===P.volume()||P.muted()?I.setVolume(0):I.setVolume(P.volume())}function E(){O.playedPreroll=!1,O.adPlaying=!1,R=!1,M.log("reset")}function A(){i()&&I.sendToFlash("pause-ad")}function C(){i()&&I.sendToFlash("resume-ad")}var P,S,I,L,N,x,M=a.createLogger(!1,"Ads Flash Overlay"),V=3e4,U=!1,F=!1,R=!1,B=!1,O={fullscreen:!1,mute:!1,postroll:!1,adPlaying:!1,playedAd:!1,playedPreroll:!1,volumeChangePending:!1},D=!1;return{init:e,onPlay:p,updateTime:w,onEnd:c,toggleFullscreen:u,volumeChanged:k,pauseAd:A,resumeAd:C,reset:E}}var a=e("jsutils");t.exports=r},{jsutils:11}],4:[function(e,t,n){"use strict";function r(){var e=a();i.createLogger(!1,"Ads Flash Overlay");return{flashComponent:e}}var a=e("./videojsInterface"),i=e("jsutils");t.exports=r},{"./videojsInterface":5,jsutils:11}],5:[function(e,t,n){"use strict";function r(){function e(e,r,i){r.contentduration=e.duration(),l=a(),o=e,s=r,t(),n(),l.init(e,r,i)}function t(){o.on("play",l.onPlay),o.on("timeupdate",function(){l.updateTime(),r()}),o.on("ended",function(){l.reset()}),o.on("fullscreenchange",l.toggleFullscreen),o.on("volumechange",l.volumeChanged),o.on("adfullscreenchange",l.toggleFullscreen),o.on("advolumechange",l.volumeChanged),o.on("contentupdate",function(){u.log("contentupdate flash"),l.reset(),o.pause(),o.play()})}function n(){o.vpApi.pauseAd=function(){"ad-playback"===o.ads.state&&l.pauseAd()},o.vpApi.resumeAd=function(){"ad-playback"===o.ads.state&&l.resumeAd()}}function r(){1e3*o.currentTime()>1e3*o.duration()-700&&l.onEnd()}var o,s,l,u=i.createLogger(!1,"Ads Flash Overlay");return{init:e}}var a=e("./bridge"),i=e("jsutils");t.exports=r},{"./bridge":3,jsutils:11}],6:[function(t,n,r){(function(e){(function(e,t,n,r,a){!function(e,t){"use strict";var n={},r={},a={},i={},o={},s={error:n,model:r,parse:a,request:i,format:o};s.debugMessage=function(t){return e.videoplaza.debug&&e.videoplaza.debug[t]?e.videoplaza.debug[t]:t},function(t){t.error.ParseError=function(e){this.message=e,this.name="ParseError"},t.error.ParseError.prototype=new e.Error,t.error.ParseError.prototype.constructor=t.error.ParseError}(s),function(e){e.Tracker=function(){var t,n=function(){t=new e.request.VpTracker},r=function(e,n){return t.reportError(e,n)},a=function(e,n){return t.track(e,n)};return n.prototype={reportError:r,track:a},n}(),e.Tracker.errorEvents={ad:{error:"error"},creative:{invalidCreativeUri:"invalidCreativeUri",invalidCreative:"invalidCreative"}},e.Tracker.trackingEvents={ad:{impression:"0"},creative:{acceptInvitation:"1",clickThrough:"20",close:"7",creativeView:"90",collapse:"2",complete:"18",expand:"31",firstQuartile:"15",fullscreen:"37",midpoint:"16",mute:"32",pause:"34",resume:"36",rewind:"35",start:"14",thirdQuartile:"17",timeSpent:"100",unmute:"33"}}}(s),function(t){t.request.VpXHR=function(){},t.request.VpXHR.httpErrorCodeTranslation={503:"serviceUnavailableCode503",500:"internalServerErrorCode500",404:"requestedResourceNotFoundCode404",400:"badRequestToServerCode400",0:"requestCouldNotBeSentToServerCode0",ieError:"requestFailedError"},t.request.VpXHR.prototype.request=function(n,r,a,i){var o,s,l,u="GET";if(r||(r=2e3),a||(a=function(){}),i||(i=function(){}),e.XMLHttpRequest)if(o=new e.XMLHttpRequest,"withCredentials"in o){try{o.withCredentials=!0}catch(c){}try{o.open(u,n,!0),s=!1}catch(c){return void i(t.request.VpXHR.httpErrorCodeTranslation[0])}o.onreadystatechange=function(){4===o.readyState&&(l&&e.clearTimeout(l),200===o.status?a(o.responseText):s||i(t.request.VpXHR.httpErrorCodeTranslation[o.status]||"unknownError"))},l=e.setTimeout(function(){s=!0,o.abort(),i("requestTimeout")},r),o.send()}else if(e.XDomainRequest){o=new e.XDomainRequest,o.onload=function(){a(o.responseText)},o.onerror=function(){i(t.request.VpXHR.httpErrorCodeTranslation.ieError||"unknownError")},o.onprogress=function(){},o.ontimeout=function(){i("requestTimeout")};try{o.open(u,n),o.timeout=r,o.send()}catch(c){i(t.request.VpXHR.httpErrorCodeTranslation.ieError||"unknownError")}}else i("corsNotSupportedInBrowser")}}(s),function(e){e.request.Bucket=function(){},e.request.Bucket.isBucketEvent=function(){return!1},e.request.Bucket.prototype.add=function(){return!1},e.request.Bucket.prototype.empty=function(){return!1}}(s),function(t){t.request.LocalStorage=function(e){this.pidKey=e},t.request.LocalStorage.prototype.getObjectFromUri=function(e){var t={},n=e.split("?");if(n.length>0){if(t.base=n[0],t.params={},n[1])for(var r=n[1].split("&"),a=0;a<r.length;a++){var i=r[a].split("=");t.params[i[0]]=i[1]?i[1]:null}else t.params=null;return t}return null},t.request.LocalStorage.prototype.supportsLocalStorage=function(){try{return"localStorage"in e&&null!==e.localStorage}catch(t){return!1}},t.request.LocalStorage.prototype.getData=function(e){try{return localStorage.getItem(e)}catch(t){return null}},t.request.LocalStorage.prototype.setData=function(e,t){try{return localStorage.setItem(e,t),!0}catch(n){return!1}},t.request.LocalStorage.prototype.removeData=function(e){try{return localStorage.removeItem(e),!0}catch(t){return!1}},t.request.LocalStorage.prototype.getPersistentIdFromTicket=function(e){var t=null;if(this.supportsLocalStorage()&&e.length>0){var n=this.getObjectFromUri(e[0].trackingUris.impression[0]);if(n&&n.params&&n.params.pid&&(t=n.params.pid,!this.setData(this.pidKey,t)))return null}return t},t.request.LocalStorage.prototype.getPersistentIdFromLocalStorage=function(){return this.supportsLocalStorage()?this.getData(this.pidKey):null}}(s),function(e){function t(e){if(null===e||"object"!=typeof e)return e;var n=new e.constructor;for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function n(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){t[n]={};for(var r in e[n])e[n].hasOwnProperty(r)&&(t[n][e[n][r]]=r)}return t}function r(e){var t,n=/\[CACHEBUSTING\]|%5BCACHEBUSTING%5D/;return n.test(e)&&(t=Math.floor(89999999*Math.random()+1e7),e=e.replace(n,t.toString())),e}e.request.VpTracker=function(){this.vpXHR=new e.request.VpXHR,this.bucket=new e.request.Bucket,this.blocked={}},e.request.VpTracker.errorEvents=t(e.Tracker.errorEvents),e.request.VpTracker.trackingEvents=t(e.Tracker.trackingEvents),e.request.VpTracker.trackingEvents.ad.impression2="3",e.request.VpTracker.trackingEvents.creative.creativeView2="91",e.request.VpTracker.trackingEvents.creative.acceptInvitation2="4",e.request.VpTracker.trackingEvents.creative.interaction="10",e.request.VpTracker.errorEventNames=n(e.request.VpTracker.errorEvents),e.request.VpTracker.trackingEventNames=n(e.request.VpTracker.trackingEvents),e.request.VpTracker.prototype.trackUris=function(t){for(var n="",a=0;a<t.length;a++)n=t[a],e.request.Bucket.isBucketEvent(n)?this.bucket.add(r(t[a])):this.vpXHR.request(r(n),2e3)},e.request.VpTracker.prototype.block=function(t,n){return n||(n=""),t instanceof e.model.Trackable?(this.blocked[t.uniqueId+n]=!0,!0):!1},e.request.VpTracker.prototype.isBlocked=function(t,n){return n||(n=""),t instanceof e.model.Trackable?t.uniqueId+n in this.blocked:!1},e.request.VpTracker.prototype.trackCreativeEvent=function(t,n){var r,a=e.request.VpTracker.trackingEvents.creative,i=[a.clickThrough,a.creativeView,a.creativeView2],o=[a.acceptInvitation,a.clickThrough,a.close,a.collapse,a.expand,a.fullscreen,a.pause,a.resume,a.rewind,a.mute,a.unmute],s=[a.acceptInvitation,a.interaction,a.start,a.firstQuartile,a.midpoint,a.thirdQuartile,a.complete],l=[a.creativeView];return t instanceof e.model.Creative&&e.request.VpTracker.trackingEventNames.creative[n]?t instanceof e.model.Companion&&i.indexOf(n)<0?!1:(r=t.parent,this.isBlocked(r)||this.isBlocked(t)?!1:(o.indexOf(n)>-1&&t.type!==e.model.Creative.creativeTypes.companion&&this.track(t,a.interaction),n===a.complete?this.track(t,a.thirdQuartile):n===a.thirdQuartile?this.track(t,a.midpoint):n===a.midpoint?this.track(t,a.firstQuartile):n===a.firstQuartile&&this.track(t,a.start),n===a.timeSpent?!0:n!==a.clickThrough||t.type!==e.model.Creative.creativeTypes.nonLinear&&t.type!==e.model.Creative.creativeTypes.companion?(this.isBlocked(r,n)||this.isBlocked(t,n)?n===a.acceptInvitation?this.track(t,e.request.VpTracker.trackingEvents.creative.acceptInvitation2):n===a.creativeView&&this.track(t,e.request.VpTracker.trackingEvents.creative.creativeView2):(s.indexOf(n)>-1&&this.block(r,n),l.indexOf(n)>-1&&this.block(t,n),this.trackUris(t.trackingUris[e.request.VpTracker.trackingEventNames.creative[n]])),!0):t.resourceType===e.model.NonLinearCreative.resourceTypes.staticResource)):!1},e.request.VpTracker.prototype.trackAdEvent=function(t,n){return t.constructor===e.model.Ad&&e.request.VpTracker.trackingEventNames.ad[n]?this.isBlocked(t)?!1:t.type===e.model.Ad.types.inventory&&n===e.request.VpTracker.trackingEvents.ad.impression?(this.block(t),this.trackUris(t.trackingUris[e.request.VpTracker.errorEventNames.ad.error]),!0):(this.isBlocked(t,n)?n===e.request.VpTracker.trackingEvents.ad.impression&&this.track(t,e.request.VpTracker.trackingEvents.ad.impression2):(n===e.request.VpTracker.trackingEvents.ad.impression&&this.block(t,n),this.trackUris(t.trackingUris[e.request.VpTracker.trackingEventNames.ad[n]])),!0):!1},e.request.VpTracker.prototype.track=function(t,n){return t?t.constructor===e.model.Ad?this.trackAdEvent(t,n):t instanceof e.model.Creative?this.trackCreativeEvent(t,n):!1:!1},e.request.VpTracker.prototype.reportError=function(t,n){var r;return t&&t instanceof e.model.Creative&&e.request.VpTracker.errorEventNames.creative[n]?(r=t.parent,this.isBlocked(r)||this.isBlocked(t)?!1:(t.type===e.model.Creative.creativeTypes.companion?this.block(t):(this.isBlocked(r,e.request.VpTracker.trackingEvents.ad.impression)||this.track(r,e.request.VpTracker.errorEventNames.ad.error),this.block(r)),!0)):!1}}(s),function(n){function r(e){return/(^(http|https)\:\/\/)?([a-z0-9\-]+)\.([a-z0-9\-]+)\.[a-z]+/i.test(e)}function a(e){var t;return e&&e.constructor===n.model.Ad?(t=new n.model.Ad,t.type=n.model.Ad.types.inventory,t.trackingUris=e.trackingUris,t):!1}n.request.VpAdCallModule=function(e,t){if(!r(e))throw new Error(n.debugMessage("invalidVpHost"));this.vpHost=e,this.adCallModuleSettings=t,this.videoplazaXHR=new n.request.VpXHR,this.vastParser=new n.parse.VastXmlParser,this.vpLocalStorage=new n.request.LocalStorage("vpPID")},n.request.VpAdCallModule.browser=function(){function t(e){return e in document.documentElement.style}var n=t("MozBoxSizing"),r=Object.prototype.toString.call(e.HTMLElement).indexOf("Constructor")>0,a=!r&&t("WebkitTransform"),i=t("msTransform");return{isSafari:r,isChrome:a,isIE:i,isFirefox:n}}(),n.request.VpAdCallModule.hasData=function(e){return e?e.constructor!==Array||0!==e.length:!1},n.request.VpAdCallModule.validateNumber=function(e,t){if(e){if(n.request.VpAdCallModule.isNumber(e)){if(0>e)throw new Error(n.debugMessage(t+"IsLessThanZero"));return!0}throw new Error(n.debugMessage(t+"IsNaN"))}return t+"IsMissing"},n.request.VpAdCallModule.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},n.request.VpAdCallModule.prototype.verifyRequestSettings=function(e,t){var r={height:"",width:"",maxBitRate:"",insertionPointType:"",playbackPosition:""},a="";if(!e)throw new Error(n.debugMessage("requestSettingsIsUndefined"));if(r.height=n.request.VpAdCallModule.validateNumber(e.height,"height"),r.width=n.request.VpAdCallModule.validateNumber(e.width,"width"),r.maxBitRate=n.request.VpAdCallModule.validateNumber(e.maxBitRate,"maxBitRate"),!e.insertionPointType)throw new Error(n.debugMessage("undefinedInsertionPointType"));switch(a=e.insertionPointType.toLowerCase()){case"onbeforecontent":case"oncontentend":case"playbacktime":r.insertionPointType="true";break;case"playbackposition":if(r.insertionPointType="true",!e.playbackPosition)throw new Error(n.debugMessage("undefinedPlaybackPosition"));if(r.playbackPosition="true",!n.request.VpAdCallModule.isNumber(e.playbackPosition))throw new Error(n.debugMessage("invalidPlaybackPosition"));if(n.request.VpAdCallModule.hasData(t)&&Number(e.playbackPosition)>Number(t))throw new Error(n.debugMessage("playbackPositionIsGtDuration"));break;default:
throw new Error(n.debugMessage("invalidInsertionPointType"))}return r},n.request.VpAdCallModule.prototype.verifyContentMetadata=function(e){var t={contentForm:"",duration:""};if(!e)throw new Error(n.debugMessage("contentMetadataIsUndefined"));if(n.request.VpAdCallModule.hasData(e.contentForm)){var r=e.contentForm.toLowerCase();if(t.contentForm="true","shortform"!==r&&"longform"!==r)throw new Error(n.debugMessage("invalidContentForm"))}else t.contentForm="contentFormIsMissing";return t.duration=n.request.VpAdCallModule.validateNumber(e.duration,"duration"),t},n.request.VpAdCallModule.prototype.translateInsertionPointType=function(e){var t=e.toLowerCase();switch(t){case"onbeforecontent":return"p";case"playbackposition":return"m";case"oncontentend":return"po";case"playbacktime":return"o";default:throw new Error(n.debugMessage("invalidInsertionPointType"))}},n.request.VpAdCallModule.prototype.buildUrl=function(t,r){var a=this.vpHost;if(-1===a.indexOf("http://")&&-1===a.indexOf("https://")&&(a="http://"+a),a.lastIndexOf("/")!==a.length-1&&(a+="/"),a+="proxy/distributor/v2?",a+="rt=vast_2.0",a+="&pf=html5",a+="&cv=h5_"+e.videoplaza.versionNumber,t){n.request.VpAdCallModule.hasData(t.flags)&&(a+="&f="+encodeURIComponent(t.flags.join(","))),n.request.VpAdCallModule.hasData(t.tags)&&(a+="&t="+encodeURIComponent(t.tags.join(",")));var i="";if(n.request.VpAdCallModule.hasData(t.category)&&(i+=t.category),t.contentPartner&&n.request.VpAdCallModule.hasData(t.contentPartner)&&(i=n.request.VpAdCallModule.hasData(i)?i+=","+t.contentPartner:t.contentPartner),n.request.VpAdCallModule.hasData(i)&&(a+="&s="+encodeURIComponent(i)),n.request.VpAdCallModule.hasData(t.contentForm)&&(a+="&cf="+this.translateContentForm(t.contentForm)),n.request.VpAdCallModule.hasData(t.contentId)&&(a+="&ci="+encodeURIComponent(t.contentId)),n.request.VpAdCallModule.hasData(t.duration)&&(a+="&cd="+t.duration),n.request.VpAdCallModule.hasData(t.customParameters)){var o=/[^A-Za-z0-9_~\-.]/;for(var s in t.customParameters)t.customParameters.hasOwnProperty(s)&&!o.test(s)&&(a+="&cp."+s+"="+encodeURIComponent(t.customParameters[s]))}}if(r){if(n.request.VpAdCallModule.hasData(r.width)&&(a+="&vwt="+r.width),n.request.VpAdCallModule.hasData(r.height)&&(a+="&vht="+r.height),n.request.VpAdCallModule.hasData(r.maxBitRate)&&(a+="&vbw="+r.maxBitRate),n.request.VpAdCallModule.hasData(r.insertionPointType)){var l=r.insertionPointType.toLowerCase();a+="&tt="+this.translateInsertionPointType(l),"playbackposition"===l&&n.request.VpAdCallModule.hasData(r.playbackPosition)&&(a+="&bp="+encodeURIComponent(r.playbackPosition))}n.request.VpAdCallModule.hasData(r.referrerUrl)&&(a+="&ru="+encodeURIComponent(r.referrerUrl))}if(this.adCallModuleSettings&&n.request.VpAdCallModule.hasData(this.adCallModuleSettings.deviceContainer)&&(a+="&dcid="+encodeURIComponent(this.adCallModuleSettings.deviceContainer)),this.adCallModuleSettings&&n.request.VpAdCallModule.hasData(this.adCallModuleSettings.persistentId))a+="&pid="+encodeURIComponent(this.adCallModuleSettings.persistentId);else{var u=this.vpLocalStorage.getPersistentIdFromLocalStorage();u&&(a+="&pid="+encodeURIComponent(u))}var c=this.getURLParameter("vppreview");return n.request.VpAdCallModule.hasData(c)&&(a+="&vppreview="+c),a+="&st="+encodeURIComponent("0:0,3,4,10,20:1,91,100"),a+="&rnd="+n.model.Trackable.generateUniqueId()},n.request.VpAdCallModule.prototype.translateContentForm=function(e){var t=e.toLowerCase();return"longform"===t?"long_form":"short_form"},n.request.VpAdCallModule.prototype.getURLParameter=function(t){var n="",r="[\\?&]"+t+"=([^&#]*)",a=new RegExp(r),i=a.exec(e.location.href.toString());return null!==i&&(n=i[1]),n},n.request.VpAdCallModule.prototype.requestAds=function(i,o,s,l){function u(r,i){function o(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=t[n].concat(e[n]));return t}function v(e,t){if(t.trackingUris=o(e.trackingUris,t.trackingUris),e.vastAdTagUri?t.vastAdTagUri=e.vastAdTagUri:delete t.vastAdTagUri,e.creatives)for(var r in e.creatives)!e.creatives.hasOwnProperty(r)||e.creatives[r]instanceof n.model.Companion||(t.creatives[r].duration=e.creatives[r].duration,t.creatives[r].trackingUris=o(e.creatives[r].trackingUris,t.creatives[r].trackingUris),t.creatives[r].mediaFiles=e.creatives[r].mediaFiles,t.creatives[r].clickThroughUri=e.creatives[r].clickThroughUri);return t}function m(e){p-=1,0===p&&s(e)}function y(e,t){var n=t.indexOf(e);t[n]=a(e),m(t)}p+=1,c.videoplazaXHR.request(r,g,function(r){var a,o;try{r=r.replace(/<!--[\s\S]*?-->/g,""),a=c.vastParser.parse(r)}catch(s){return void(i?y(i,d):l(s.message))}if((i===t&&n.request.VpAdCallModule.browser.isSafari||n.request.VpAdCallModule.browser.isIE)&&c.vpLocalStorage.getPersistentIdFromTicket(a),i&&1!=a.length)return void y(i,d);for(var p=0;p<a.length;p++)o=a[p],i?o=v(o,i):d[p]=o,o.vastAdTagUri!==t?(i===t&&(f[o.id]=function(t){return e.setTimeout(function(){h=!0,y(t,d)},g)}(o)),h||u(o.vastAdTagUri,o)):f[o.id]!==t&&e.clearTimeout(f[o.id]);m(d)},function(e){i?y(i,d):l(e)})}var c=this,d=[],p=0,f={},h=!1,g=4e3;if("function"!=typeof s&&"function"!=typeof l)throw new Error(n.debugMessage("adRequestMissingMandatoryCallbacks"));if(!r(this.vpHost))throw new Error(n.debugMessage("invalidVpHost"));try{this.verifyContentMetadata(i),this.verifyRequestSettings(o,i.duration)}catch(v){return void l(v.message)}u(this.buildUrl(i,o))}}(s),function(e){e.model.Trackable=function(){this.trackingUris=null,this.uniqueId=null},e.model.Trackable.generateTrackingUris=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=[]);for(var a in t)t.hasOwnProperty(a)&&(n[a]=[]);return n},e.model.Trackable.generateUniqueId=function(){return Math.floor(1e16*Math.random())}}(s),function(e){e.model.Ad=function(){this.campaignId=null,this.creatives=[],this.customId=null,this.customGoalId=null,this.customCampaignId=null,this.goalId=null,this.id="0",this.labels={},this.type=null,this.variant=null,this.trackingUris=e.model.Trackable.generateTrackingUris(e.request.VpTracker.trackingEvents.ad,e.request.VpTracker.errorEvents.ad),this.uniqueId=e.model.Trackable.generateUniqueId()},e.model.Ad.types={inventory:"inventory",standard:"standard_spot"},e.model.Ad.variants={normal:"normal",sponsor:"sponsor"},e.model.Ad.prototype=new e.model.Trackable,e.model.Ad.prototype.constructor=e.model.Ad}(s),function(e){e.model.Creative=function(){this.clickThroughUri=null,this.duration=null,this.id=null,this.parent=null,this.type=null},e.model.Creative.creativeTypes={linear:"linear",nonLinear:"nonLinear",companion:"companion"},e.model.Creative.prototype=new e.model.Trackable,e.model.Creative.prototype.constructor=e.model.Creative}(s),function(e){e.model.MediaFile=function(){this.bitRate=null,this.deliveryMethod=null,this.height=null,this.id=null,this.mimeType=null,this.uri=null,this.width=null}}(s),function(e){e.model.LinearCreative=function(t){this.mediaFiles=[],this.parent=t||null,this.type=e.model.Creative.creativeTypes.linear,this.uniqueId=e.model.Trackable.generateUniqueId(),this.trackingUris=e.model.Trackable.generateTrackingUris(e.request.VpTracker.trackingEvents.creative)},e.model.LinearCreative.prototype=new e.model.Creative,e.model.LinearCreative.prototype.constructor=e.model.LinearCreative}(s),function(e){e.model.NonLinearCreative=function(t){this.height=null,this.mimeType=null,this.resource=null,this.resourceType=null,this.width=null,this.parent=t||null,this.type=e.model.Creative.creativeTypes.nonLinear,this.uniqueId=e.model.Trackable.generateUniqueId(),this.trackingUris=e.model.Trackable.generateTrackingUris(e.request.VpTracker.trackingEvents.creative)},e.model.NonLinearCreative.resourceTypes={staticResource:"staticResource",iFrame:"iFrame",html:"html"},e.model.NonLinearCreative.prototype=new e.model.Creative,e.model.NonLinearCreative.prototype.constructor=e.model.NonLinearCreative}(s),function(e){e.model.Companion=function(t){this.zoneId=null,this.zoneType=null,this.parent=t||null,this.type=e.model.Creative.creativeTypes.companion,this.uniqueId=e.model.Trackable.generateUniqueId(),this.trackingUris=e.model.Trackable.generateTrackingUris(e.request.VpTracker.trackingEvents.creative)},e.model.Companion.zoneTypes={html:"html"},e.model.Companion.prototype=new e.model.NonLinearCreative,e.model.Companion.prototype.constructor=e.model.Companion}(s),function(t){function n(e){var t=e.split(":"),n=0;if(!(t.length>0&&t.length<=3))return null;for(var r=0;r<t.length;r++)n+=Number(t[t.length-r-1]*(r?Math.pow(60,r):1));return isNaN(n)?null:n}function r(e,t){return"2.0"===t&&-1===e.indexOf("[CACHEBUSTING]")&&-1===e.indexOf("%5BCACHEBUSTING%5D")&&e.length>0&&(e+=e.indexOf("?")>-1?"&rnd=[CACHEBUSTING]":"?rnd=[CACHEBUSTING]"),e}function a(e){return e&&(e=e.toLowerCase(),"bumper"===e||e===t.model.Ad.variants.sponsor)?t.model.Ad.variants.sponsor:t.model.Ad.variants.normal}t.parse.VastXmlParser=function(){this.parser=new e.DOMParser},t.parse.VastXmlParser.prototype.getAttributeValue=function(e,t){var n;return e&&e.attributes&&(n=e.attributes.getNamedItem(t))?n.value:null},t.parse.VastXmlParser.prototype.createTrackingUris=function(e,n,a){var i,o,s,l;i={},o=n.getElementsByTagName("Tracking");for(var u=0;u<o.length;u++)s=o.item(u),l=this.getAttributeValue(s,"event"),(l in t.request.VpTracker.trackingEvents.ad||l in t.request.VpTracker.trackingEvents.creative||l in t.request.VpTracker.trackingEventNames.ad||l in t.request.VpTracker.trackingEventNames.creative)&&(l in t.request.VpTracker.trackingEventNames.ad?l=t.request.VpTracker.trackingEventNames.ad[l]:l in t.request.VpTracker.trackingEventNames.creative&&(l=t.request.VpTracker.trackingEventNames.creative[l]),i[l]||(i[l]=[]),i[l].push(r(this.trim(s.textContent),a)));for(l in i)e[l]&&(e[l]=e[l].concat(i[l]));return e},t.parse.VastXmlParser.prototype.createCreatives=function(e,a,i,o){for(var s,l,u,c,d,p,f,h,g,v,m,y,b,w=[],_={Linear:t.model.Creative.creativeTypes.linear,NonLinearAds:t.model.Creative.creativeTypes.nonLinear,CompanionAds:t.model.Creative.creativeTypes.companion},k={StaticResource:t.model.NonLinearCreative.resourceTypes.staticResource,IFrameResource:t.model.NonLinearCreative.resourceTypes.iFrame,HTMLResource:t.model.NonLinearCreative.resourceTypes.html},T=0;T<e.length;T++)if(s=this.getAttributeValue(e[T],"id"),l=_[e[T].firstChild.nodeName],l===t.model.Creative.creativeTypes.linear){for(u=new t.model.LinearCreative(a),u.id=s,c=e[T].getElementsByTagName("Duration"),c.length>0&&(u.duration=n(c[0].textContent)),d=e[T].getElementsByTagName("TrackingEvents"),d.length>0&&(u.trackingUris=this.createTrackingUris(u.trackingUris,d[0],o)),f=e[T].getElementsByTagName("ClickTracking"),p=0;p<f.length;p++)u.trackingUris.clickThrough.push(r(this.trim(f[p].textContent),o));for(h=e[T].getElementsByTagName("ClickThrough"),h.length>0&&(u.clickThroughUri=this.trim(h[0].textContent)),g=e[T].getElementsByTagName("MediaFile"),p=0;p<g.length;p++)v=new t.model.MediaFile,v.bitRate=this.getAttributeValue(g[p],"bitrate"),v.deliveryMethod=this.getAttributeValue(g[p],"delivery"),v.height=this.getAttributeValue(g[p],"height"),v.id=this.getAttributeValue(g[p],"id"),v.mimeType=this.getAttributeValue(g[p],"type"),v.uri=g[p].textContent,v.width=this.getAttributeValue(g[p],"width"),u.mediaFiles.push(v);w.push(u)}else if(l===t.model.Creative.creativeTypes.nonLinear)y=e[T].getElementsByTagName("NonLinear");else if(l===t.model.Creative.creativeTypes.companion)for(b=e[T].getElementsByTagName("Companion"),p=0;p<b.length;p++)u=new t.model.Companion(a),b[p].getElementsByTagName("TrackingEvents")[0]&&(u.trackingUris=this.createTrackingUris(u.trackingUris,b[p].getElementsByTagName("TrackingEvents")[0])),m=b[p].firstChild,u.resourceType=k[m.nodeName],u.resource=m.textContent,u.height=this.getAttributeValue(b[p],"height"),u.id=this.getAttributeValue(b[p],"id"),u.width=this.getAttributeValue(b[p],"width"),i&&i[u.id]?(u.zoneId=i[u.id].zoneId,u.zoneType=i[u.id].zoneMethod):"undefined"!=typeof console&&console.log("No matching companion in AdInfo."),w.push(u);return w},t.parse.VastXmlParser.prototype.createAds=function(e,n){for(var i,o,s,l,u,c,d,p,f,h=[],g=[],v={COMPANION_BANNER_JAVASCRIPT:t.model.Companion.zoneTypes.html},m=!1,y=0;y<e.length;y++){if(i=new t.model.Ad,e[y].getElementsByTagName("AdSystem").length>0){var b=e[y].getElementsByTagName("AdSystem")[0].textContent;b&&b.toLowerCase().indexOf("videoplaza karbon")>-1&&(m=!0)}for("Wrapper"===e[y].firstChild.nodeName?(o=e[y].getElementsByTagName("VASTAdTagURI"),o.length>0&&(i.vastAdTagUri=o[0].textContent)):o=null,i.id=this.getAttributeValue(e[y],"id"),null===i.id&&(i.id="0",i.type=t.model.Ad.types.inventory),l=e[y].getElementsByTagName("Extension"),s=0;s<l.length;s++)if("AdServer"===this.getAttributeValue(l[s],"type")&&"Videoplaza"===this.getAttributeValue(l[s],"name")){u=l[s].getElementsByTagName("AdInfo")[0],i.campaignId=this.getAttributeValue(u,"cid"),i.customId=this.getAttributeValue(u,"customaid"),i.customGoalId=this.getAttributeValue(u,"customgid"),i.customCampaignId=this.getAttributeValue(u,"customcid"),i.goalId=this.getAttributeValue(u,"gid"),i.type=this.translateIncorrectAdType(this.getAttributeValue(u,"format")),i.variant=a(this.getAttributeValue(u,"variant")),c=u.getElementsByTagName("Companion");for(var w=0;w<c.length;w++)g[this.getAttributeValue(c[w],"id")]={zoneId:this.getAttributeValue(c[w],"zone"),zoneMethod:v[this.getAttributeValue(c[w],"zoneType")]}}for(d=e[y].getElementsByTagName("Impression"),s=0;s<d.length;s++)i.trackingUris.impression.push(r(this.trim(d[s].textContent),n));if(i.trackingUris.impression.length<1)throw new t.error.ParseError(t.debugMessage("noImpressionElement"));for(p=e[y].getElementsByTagName("Error"),null===o&&m&&0===p.length&&i.type===t.model.Ad.types.inventory&&(p=d),s=0;s<p.length;s++)i.trackingUris.error.push(r(this.trim(p[s].textContent),n));if(f=e[y].getElementsByTagName("Creative"),!m&&0===f.length&&null===o)throw new t.error.ParseError(t.debugMessage("noCreativeElement"));i.creatives=this.createCreatives(f,i,g,n),h.push(i)}return h},t.parse.VastXmlParser.prototype.translateIncorrectAdType=function(e){return"spot_standard"===e?"standard_spot":e},t.parse.VastXmlParser.prototype.removeTextNodes=function(e){var t,n,r=/^\s*$/;if(3===e.nodeType)r.test(e.nodeValue)&&e.parentNode.removeChild(e);else if(1===e.nodeType||9===e.nodeType)for(t=e.firstChild;t;)n=t.nextSibling,this.removeTextNodes(t),t=n},t.parse.VastXmlParser.prototype.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},t.parse.VastXmlParser.prototype.parse=function(e){var n,r,a,i,o=[];try{n=this.parser.parseFromString(e,"text/xml")}catch(s){throw"undefined"!=typeof console&&console.log(t.debugMessage("nonValidXML")),new t.error.ParseError("Could not parse VAST. "+s.message)}if(r=n.documentElement,!r)throw new t.error.ParseError("Could not parse VAST. No root element");if(this.removeTextNodes(r),"VAST"!==r.nodeName)throw r.getElementsByTagName("parsererror")&&r.getElementsByTagName("parsererror").length>0&&"undefined"!=typeof console&&console.log(t.debugMessage("nonValidXML")),"undefined"!=typeof console&&console.log(t.debugMessage("nonValidVASTTicket")),new t.error.ParseError('Could not parse VAST. Root element is not "VAST".');return i=this.getAttributeValue(r,"version"),a=r.getElementsByTagName("Ad"),a.length>0&&(o=this.createAds(a,i)),o}}(s),function(e){e.AdCallModule=function(){var t,n=function(n,r){t=new e.request.VpAdCallModule(n,r)};return n.prototype.requestAds=function(e,n,r,a){t.requestAds(e,n,r,a)},n}()}(s),e.videoplaza||(e.videoplaza={}),e.videoplaza.core=s,e.videoplaza.buildDate="20140828",e.videoplaza.versionNumber="1.0.14.17.1"}(window),a("undefined"!=typeof videoplaza?videoplaza:window.videoplaza)}).call(e,void 0,void 0,void 0,void 0,function(e){n.exports=e})}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,n){function r(){"use strict";function e(e){var t,n,r={};for(t in e)e.hasOwnProperty(t)&&(n=t.toLowerCase(),n=n.replace(/^vp/i,""),"host"===n&&(n="vpHost"),r[n]={val:e[t],oldName:t});return r}function t(t){var n,r={},a=e(v);for(n in t)t.hasOwnProperty(n)&&(a[n]?r[a[n].oldName]=t[n].val:r[t[n].oldName]=t[n].val);return r}function n(e){for(var t,n=e,a={},i=0;i<n.length;i++)if(n[i])for(t in n[i])n[i].hasOwnProperty(t)&&("tags"===t||"flags"===t?(a[t]||(a[t]=n[i][t]),a[t].val=a[t].val.concat(n[i][t].val),a[t].val=r(a[t].val)):void 0!==n[i][t].val&&null!==n[i][t].val&&n[i][t].val.toString().length&&(a[t]=n[i][t]));return a}function r(e){for(var t=[],n=!0,r=0;r<e.length;r++)if(0===t.length)t.push(e[r]);else{for(var a=0;a<t.length;a++)t[a]===e[r]&&(n=!1);n&&t.push(e[r]),n=!0}return t}function a(e){return e.duration&&e.longFormLimit?(e.duration>=e.longFormLimit?e.contentForm="longForm":e.contentForm="shortForm",e):e}function i(e){e.contentForm&&("short_form"===e.contentForm&&(e.contentForm="shortForm"),"long_form"===e.contentForm&&(e.contentForm="longForm"))}function o(e){e.contentForm&&(e.tags||(e.tags=[]),"shortForm"===e.contentForm&&e.tags.push("short_form"),"longForm"===e.contentForm&&e.tags.push("long_form"))}function s(r,s){var u={},c=r,d=!0;null!==s&&(d=s);for(var p=0;p<c.length;p++)c[p]&&(c[p]=e(c[p]));return d&&(c=c.unshift(v)),u=n(c),u=t(u),u=a(u),i(u),o(u),l(v,u),m=!0,h(u),u}function l(e,t){var n;for(n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function u(){var e={category:"",contentForm:"",contentId:"",contentPartner:"",duration:null,flags:[],tags:[],customParameters:{}};return l(e,v),m?e:e}function c(){var e={vpHost:"",opt:{deviceContainer:"",persistentId:""}};return e.vpHost=v.vpHost,l(e.opt,v),m?e:e}function d(){var e={height:null,maxBitRate:null,playbackPosition:null,insertionType:"",width:null,referrerUrl:""};return l(e,v),m?e:e}function p(){return v.cuepoints}function f(){return v}function h(e){var t=e,n={flags:"vpFlags",environmenturl:"vpEnvironmentUrl",contentform:"vpcontentform",contentpartner:"vpContentPartner",contentid:"vpContentId"};for(var r in t)for(var a in n)r.toLowerCase()===a.toLowerCase()?y[n[a]]=t[r]:y[r]=t[r];return y}function g(){return y}var v={vpHost:"",cuepoints:[],playerDivId:"",category:"",contentForm:"",contentId:"",contentPartner:"",duration:null,flags:[],tags:[],customParameters:{},height:null,maxBitRate:null,playbackPosition:null,insertionType:"",width:null,referrerUrl:"",deviceContainer:"",persistentId:"",optional:{playMidrollOnSeek:!0},longFormLimit:null},m=!1,y={};return{aggregateData:s,getAdCallModuleSettings:c,getContentMetadata:u,getRequestSettings:d,getCuePoints:p,getMetadata:f,getFlashFormat:g}}t.exports=r},{}],8:[function(e,t,n){function r(e,t){var n={};if(!window.console)return function(){};if(e||a())for(var r in console)"function"==typeof console[r]&&(n[r]=console[r].bind(window.console,t.toString()+":"));else for(var r in console)"function"==typeof console[r]&&(n[r]=function(){});return n}function a(){var e=i("vplog"),t=!1;switch(e){case"true":t=!0;break;case"false":t=!1;break;default:t=!1}return t}function i(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}t.exports={createLogger:r,getUrlQueryParameter:i}},{}],9:[function(e,t,n){function r(){function e(e){if(!S.initCalled){S.initCalled=!0;var t=M.getAdCallModuleSettings();P.log("adCallModuleSettings sdk",t,e.metadata.flags),I=e,I.cuepoints=M.getCuePoints(),I.metadata.tags?I.metadata.tags.push("html5"):I.metadata.tags=["html5"],T(),C=new i.core.AdCallModule(t.vpHost,t.opt),N=new i.core.Tracker}}function t(e,t){switch(e){case"preroll":_("noprerolls")?V.dispatch("vp:ads-error",L):n("onBeforeContent");break;case"midroll":_("nomidrolls")?V.dispatch("vp:ads-error",L):n("playbackPosition",t);break;case"postroll":_("nopostrolls")?V.dispatch("vp:ads-error",L):n("onContentEnd");break;default:throw"Unregonised ad type"}L.adType=e}function n(e,t){var n=M.getContentMetadata();requestSettings=M.getRequestSettings(),requestSettings.insertionPointType=e,requestSettings.playbackPosition=t||"",C.requestAds(n,requestSettings,m,y)}function r(){S.adPlaying=!0,N.track(x[0],i.core.Tracker.trackingEvents.ad.impression)}function l(){var e={adPlaying:S.adPlaying,adClicked:L.tracker.click};return!S.adPlaying||L.tracker.click?e:(window.open(L.creative.clickThroughUri,"_blank"),N.track(L.creative,i.core.Tracker.trackingEvents.creative.clickThrough),L.tracker.click=!0,e)}function u(){S.adPlaying&&(x.shift(),x.length>0?(b(x[0]),V.dispatch("vp:ads-ready",L)):(S.adPlaying=!1,c(L.adType),V.dispatch("vp:adslot-complete",L)))}function c(e){switch(e){case"adPlaying":S.adPlaying=!0;break;case"preroll":S.prerollCalled=!0;break;case"midroll":S.midrollCalled[S.cuepoint]=!0;break;case"postroll":S.postrollCalled=!0;break;default:throw"The selected plugin state("+e+") is not supported"}}function d(e){e>=0&&!L.tracker.e14&&(N.track(L.creative,i.core.Tracker.trackingEvents.creative.start),L.tracker.e14=!0),e>=L.duration/4&&!L.tracker.e15&&(N.track(L.creative,i.core.Tracker.trackingEvents.creative.firstQuartile),L.tracker.e15=!0),e>=L.duration/2&&!L.tracker.e16&&(N.track(L.creative,i.core.Tracker.trackingEvents.creative.midpoint),L.tracker.e16=!0),e>=L.duration/2+L.duration/4&&!L.tracker.e17&&(N.track(L.creative,i.core.Tracker.trackingEvents.creative.thirdQuartile),L.tracker.e17=!0),e>=L.duration-.25&&!L.tracker.e18&&(N.track(L.creative,i.core.Tracker.trackingEvents.creative.complete),L.tracker.e18=!0)}function p(e){S.adPlaying?d(e):f(e)}function f(e){if(I.cuepoints&&I.cuepoints.length>0){var n=h(e,0);n!==!1&&(t("midroll",I.cuepoints[n]),S.cuepoint=I.cuepoints[n],S.midrollCalled[S.cuepoint]=!0)}}function h(e,t){return t>=I.cuepoints.length?!1:t+1===I.cuepoints.length?g(e,t):e>=I.cuepoints[t+1]?h(e,t+1):g(e,t)}function g(e,t){return e>=I.cuepoints[t]&&!S.midrollCalled[I.cuepoints[t]]?v(e,t):!1}function v(e,t){return I.metadata.optional&&!I.metadata.optional.playMidrollOnSeek&&e-.5>I.cuepoints[t]?!1:t}function m(e){x=k(e),x.length>0?(b(x[0]),V.dispatch("vp:ads-ready",L)):V.dispatch("vp:ads-error",L)}function y(e){}function b(e){e&&(L.creative=e.creatives[0],L.mediaFile=w(L.creative),L.tracker={e14:!1,e15:!1,e16:!1,e17:!1,e18:!1,click:!1},L.adObject=e,L.duration=e.creatives[0].duration)}function w(e){mediaFiles=e.mediaFiles;for(var t=0;t<mediaFiles.length;t++)if("mp4"===mediaFiles[t].uri.slice(-3))return mediaFiles[t];return mediaFiles[0]}function _(e){if(I.metadata.flags){for(var t=I.metadata.flags,n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}}function k(e){for(var t=[],n=0;n<e.length;n++)switch(e[n].type){case"standard_spot":"linear"===e[n].creatives[0].type&&t.push(e[n]);break;case"inventory":N.track(e[n],i.core.Tracker.trackingEvents.ad.impression)}return t}function T(){for(var e=0;e<I.cuepoints.length;e++)S.midrollCalled[I.cuepoints[e]]=!1}function E(){return S.adPlaying}function A(){T()}var C,P=s.createLogger(!1,"ADS HTML5 SDKE"),S={adPlaying:!1,prerollCalled:!1,midrollCalled:{},cuepoint:0,postrollCalled:!1,initCalled:!1},I={},L={tracker:{}},N={},x=[],M=(Math.random(),a()),V=o();return{init:e,requestAds:t,adStarted:r,adEnded:u,update:p,reset:A,onClick:l,isAdPlaying:E,state:S,metadataTools:M,utils:{eventBus:V,hasFlag:_}}}var a=e("html-metadata-aggregator"),i=e("videoplaza"),o=e("./utils/eventBus.js"),s=e("jsutils");t.exports=r},{"./utils/eventBus.js":10,"html-metadata-aggregator":7,jsutils:8,videoplaza:6}],10:[function(e,t,n){function r(){"use strict";function e(e,t){for(var n=0;n<r.length;n++)if(r[n].eventName===e+a)for(var i=0;i<r[n].callbacks.length;i++)r[n].callbacks[i](t)}function t(e,t){var i,o={eventName:e+a,callbacks:[t]},s=!1;if(0===r.length)return void r.push(o);for(var l=0;l<r.length;l++)if(r[l].eventName===e+a){s=!0,i=r[l];break}s?n(i,t):r.push(o)}function n(e,t){for(var n=!1,r=0;r<e.callbacks.length;r++)if(e.callbacks[r].toString()===t.toString()){n=!0;break}n||e.callbacks.push(t)}var r=[],a=Math.round(1e3*Math.random());return{dispatch:e,addEventListener:t,randomTest:a,registeredEvents:r}}t.exports=r},{}],11:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{dup:8}],12:[function(e,t,n){function r(e){function t(e,t){E=t,T=e,r(),u(),c(),n(t)}function n(e){e.optional.skip&&a(T,e.optional.skip.timeout,e.optional.skip.text)}function r(){T.on("play",o),T.on("adtimeout",T.play),T.on("timeupdate",b),T.on("adtimeupdate",b),T.on("adended",h),T.on("contentended",m),T.on("contentupdate",s),T.on("readyforpreroll",function(){k.log("readyforpreroll")}),T.on("contentloadedmetadata",function(){k.log("contentloadedmetadata")}),T.on("contentloadeddata",function(){k.log("contentloadeddata")}),T.vpEvent.addEventListener("vp:ads-ready",d),T.vpEvent.addEventListener("vp:ads-error",p),T.vpEvent.addEventListener("vp:adslot-complete",y),l()}function o(){k.log("requestPrerolls - canPlayPreroll",A),A&&(T.pause(),e.requestAds("preroll"),A=!1)}function s(){w(),T.pause(),T.play()}function l(){var t=document.getElementById(T.el().id).firstChild;t.addEventListener("click",function(){e.onClick()}),t.addEventListener("touchstart",function(t){var n=e.onClick();n.adPlaying&&!n.adClicked&&T.pause(),n.adPlaying&&n.adClicked&&T.play()})}function u(){e.init({evtElement:T.el(),videoPlayer:T,metadata:E})}function c(){T.vpApi.pauseAd=function(){"ad-playback"===T.ads.state&&T.pause()},T.vpApi.resumeAd=function(){"ad-playback"===T.ads.state&&T.play()},T.vpApi.skipAd=function(){"ad-playback"===T.ads.state&&(T.vpEvent.dispatch("vp:ad-ended"),e.adEnded())}}function d(e){T.vpEvent.dispatch("vp:ad-ready"),T.trigger("adsready"),_=e,f()}function p(e){T.vpEvent.dispatch("vp:ad-error"),T.trigger("adserror"),T.play()}function f(){T.controlBar.progressControl.seekBar.hide(),e.adStarted(),T.ads.startLinearAdMode(),T.src({type:_.mediaFile.mimeType,src:_.mediaFile.uri}),T.play()}function h(){k.log("ad ended fired"),e.isAdPlaying()&&(e.adEnded(),T.vpEvent.dispatch("vp:ad-ended"))}function g(t){if("ad-playback"!==T.ads.state&&!e.state.postrollCalled){var n=850,r=1e3*t,a=1e3*T.duration()-n;r>=a&&v()}}function v(){e.state.postrollCalled||e.utils.hasFlag("nopostrolls")||(e.requestAds("postroll"),e.state.postrollCalled=!0,T.pause())}function m(){k.log("Content Ended"),w()}function y(e){k.log("resume playback",e),T.controlBar.progressControl.seekBar.show(),T.ads.endLinearAdMode(),"postroll"===e.adType&&T.currentTime(T.duration()-.4)}function b(t){var n=T.currentTime();g(n),e.update(n)}function w(){A=!0,_={},e.reset(),e.state.postrollCalled=!1}var _,k=i.createLogger(!1,"BC ADS Plugin"),T={},E={},A=!0;return{runPlugin:t}}var a=e("./skip-button.js"),i=e("jsutils");t.exports=r},{"./skip-button.js":17,jsutils:11}],13:[function(e,t,n){function r(){function e(e,r){p=e,f=r,v=s(),n(),t(f)}function t(e){"html"!==p.vpApi.getAdMode()&&e.optional&&e.optional.muteButton&&e.optional.muteButton.flash&&i(p)}function n(){r(),h=d(f);var e=l();u(e)}function r(){m=document.createElement("div");var e=Math.floor(899999*Math.random())+1e5;m.id="vpJSFlashBridge"+p.id().replace(/-/g,"")+e,g=document.createElement("div"),g.id="vpJSFlashBridgeWrapper"+e,g.style.position="absolute",g.style.margin="0",g.style.padding="0",g.style.top="0",g.style.left="0",g.style.width="1px",g.style.height="1px",g.appendChild(m),p.el().appendChild(g)}function l(){var e={url:"//cdn.videoplaza.tv/resources/flash/flash-js-bridge/AdPlayer_1.0.7.swf",placeHolderId:m.id,width:"100%",height:"100%",minFlashVersion:"11.0",expressInstallSwfUrl:null,flashVars:d(f),parameters:{classid:"classid"+m.id,id:m.id,name:m.id,allowScriptAccess:"always",wmode:"opaque"},attributes:{},callbackFn:c};return a.embedSWF(e.url,e.placeHolderId,e.width,e.height,e.minFlashVersion,e.expressInstallSwfUrl,e.flashVars,e.parameters,e.attributes,e.callbackFn),e}function u(e){a.createCSS("#"+e.parameters.id,"position:absolute;top:0;left:0;","screen",!0),a.createCSS("."+g.id,"height:100%!important;width:100%!important;","screen",!0)}function c(e){e.success?(p.vpEvent.dispatch("flashLoaded"),v.flashComponent.init(p,h,m.id)):p.vpEvent.dispatch("flashFailed")}function d(e){var t={};y.log("flashPlayer flashVars",e);for(var n in e)t[n]=e[n];return t.width=p.width(),t.height=p.height(),t.vphost=e.vpHost,t.vpcategory=e.category,t.vptags=e.tags,t.vpcustomparameters=e.customParameters,t.divId=m.id,t.cuepoints&&(t.cuepoints=e.cuepoints.toString()),t}var p,f,h,g,v,m,y=o.createLogger(!1,"BC ADS Plugin Flash Bridge");return{init:e}}var a=e("swfobject"),i=e("./mute-button"),o=e("jsutils"),s=e("../git_modules/js-flashadplayer-bridge/src/main.js");t.exports=r},{"../git_modules/js-flashadplayer-bridge/src/main.js":4,"./mute-button":16,jsutils:11,swfobject:1}],14:[function(e,t,n){function r(e){function t(e){m=e,r(),c()}function n(){window.console||(window.console={}),window.console.log||(window.console.log=function(){})}function r(){w=a(),y=i(w),b=w.utils.eventBus,v.vpEvent=b,_=s(w),k=o(),u()}function u(){v.vpApi={getAdMode:p,pauseAd:function(){T.log("not implemented")},resumeAd:function(){T.log("not implemented")},skipAd:function(){T.log("not implemented")}}}function c(){v.on("play",d),v.vpEvent.addEventListener("flashFailed",function(){C="html",y.runPlugin(v,g)}),v.duration()?(v.on("contentupdate",function(){T.log("content was updated")}),f()):(v.on("contentupdate",function(){T.log("content was updated")}),v.on("loadedmetadata",f))}function d(){E||(v.pause(),A=!0)}function p(){return C}function f(){E||(h(),E=!0,g=_.init(v,m),g.optional&&g.optional.flashEnabled?(C="flash",k.init(v,_.getFlashMetadata())):(C="html",y.runPlugin(v,g)),A&&(A=!1,v.play()))}function h(){m.duration||(m.duration=v.duration())}var g,v,m,y,b,w,_,k,T=l.createLogger(!1,"BC ADS Plugin"),E=!1,A=!1,C=null;n(),v=this,v.ads(),t(e)}var a=e("../git_modules/sdke-html5/src/main.js"),i=(e("contribAds"),e("./bridge")),o=e("./flashPlayer"),s=e("./metadata"),l=e("jsutils");videojs.plugin("vpbc",r)},{"../git_modules/sdke-html5/src/main.js":9,"./bridge":12,"./flashPlayer":13,"./metadata":15,contribAds:2,jsutils:11}],15:[function(e,t,n){function r(e){function t(e,t){var i,s,d,f;l=e,l.mediainfo&&(i=l.mediainfo||{},c=l.mediainfo.custom_fields||{},s=r(l.mediainfo));var h=o();return t.optional&&t.optional.urlMetadata&&(f=a.getQueryMetadata()),u=h.length>0?p.metadataTools.aggregateData([t,n(),f,i,c,s,{cuepoints:h}]):p.metadataTools.aggregateData([t,n(),f,i,c,s,d])}function n(){f.log("updated version vpconfig");var e={};return l.vpConfig&&(e=l.vpConfig||{}),e}function r(e){var t,n={},r={tags:"vpBCMapTags",category:"vpBCMapCategory",flags:"vpBCMapFlags",contentPartner:"vpBCMapContentPartner"};if(d)for(t in r)void 0!==e.custom_fields&&void 0!==e.custom_fields[d[r[t]]]&&(n[t]=e.custom_fields[d[r[t]]]);else for(t in r)void 0!==e.custom_fields&&void 0!==e.custom_fields[e[r[t]]]&&(n[t]=e.custom_fields[e[r[t]]]);return n}function o(){var e;l.mediainfo&&(e=l.mediainfo.cue_points);var t=[];if(e&&e.length>0)for(var n=0;n<e.length;n++)"vpspot"===e[n].name&&t.push(e[n].time);return t}function s(){return p.metadataTools.getFlashFormat()}var l,u,c,d,p=e,f=i.createLogger(!1,"BC ADS Plugin");return{init:t,getFlashMetadata:s}}var a=e("./url-metadata"),i=e("jsutils");t.exports=r},{"./url-metadata":18,jsutils:11}],16:[function(e,t,n){function r(e){function t(){l=n(),e.on("adstart",a),e.on("adend",i),l.addEventListener("click",s)}function n(){var t=r(e);return e.el().appendChild(t),t}function r(){var e=document.createElement("div");document.createElement("div");return e.className="mute-control",e.style.position="absolute",e.style["font-size"]="14px",e.style.color="white",e.style.bottom="0px",e.style.right="0px",e.style.width="36px",e.style.height="30px",e.style.visibility="hidden",e.style.cursor="pointer",e.style["background-image"]=u,e.style["background-position"]="0px 0px",e.style["border-style"]="solid",e.style["border-width"]="1px",e.style["border-right-width"]="0px",e}function a(){o(),l.style.visibility="visible"}function i(){l.style.visibility="hidden"}function o(){return 0===e.volume()||e.muted()?(l.style["background-position"]=d,!0):(l.style["background-position"]=c,
!1)}function s(){o()?(e.muted(!1),l.style["background-position"]=c):(e.muted(!0),l.style["background-position"]=d)}var l,u="url(//cdn.videoplaza.tv/contrib/es-vocento/new-brightcove/resources/volume_sprite.png)",c="34px 0px",d="0px 0px";t()}t.exports=r},{}],17:[function(e,t,n){function r(e,t,n){function r(){l=a(),e.on("adtimeupdate",o),e.vpEvent.addEventListener("vp:ad-ended",s),l.addEventListener("click",e.vpApi.skipAd)}function a(){var t=i(e);return e.el().appendChild(t),t}function i(){var e=document.createElement("div"),t=document.createElement("div");return e.className="skip-control",e.style.position="absolute",e.style["font-size"]="14px",e.style.color="white",e.style.bottom="30px",e.style.right="0px",e.style.padding="10px 30px 10px 25px",e.style.width="auto",e.style.visibility="hidden",e.style.cursor="pointer",e.style["background-color"]="rgba(7,20,30,.7)",e.style["border-style"]="solid",e.style["border-width"]="1px",e.style["border-right-width"]="0px",t.innerHTML=n||"Skip ad",e.appendChild(t),e}function o(){if("ad-playback"===e.ads.state){var n=t||0;e.currentTime()>n&&(l.style.visibility="visible")}}function s(){l.style.visibility="hidden"}var l;r()}t.exports=r},{}],18:[function(e,t,n){function r(){var e={vpCategory:a("category"),contentPartner:a("contentPartner"),tags:a("tags").split(",")};return e}function a(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}t.exports={getQueryMetadata:r}},{}]},{},[14])}).call(t,function(){return this}())},function(e,t,n){(function(t){var n=function(){this.networks={},this.storageKeyPrefix="shareTools-"};n.prototype.addNetwork=function(e){return this.networks[e.name]=e,this},n.prototype.getUrlFor=function(e,t){var n=this.networks[e];return n.url(t)},n.prototype.shouldShowPostShareDialog=function(e){return null!=localStorage.getItem(this.storageKeyPrefix+"dont-bother")?!1:t.any?!1:this.networks[e].postShareDialog||!1},n.prototype.flagDontShowPostShareDialog=function(){localStorage.setItem(this.storageKeyPrefix+"dont-bother","yup")},n.prototype.setupElements=function(e){var t=e instanceof jQuery?e:$(e),n=this;t.each(function(e,t){t=$(t);for(var r in n.networks)n.networks.hasOwnProperty(r)&&$(".share-"+r,t).click(function(e,t){return function(r){var a=encodeURIComponent,i={title:a(t.data("shareTitle")),description:a(t.data("shareDescription")),image:a(t.data("shareImageUrl")),url:a(t.data("shareUrl")),redirectUrl:a(t.data("shareRedirectUrl"))},o=n.getUrlFor(e,i),s=($(this),0),l=0;"undefined"!=typeof window.screenLeft?(s=window.screenLeft,l=window.screenTop):"undefined"!=typeof window.screenX&&(s=window.screenX,tp=window.screenY);var u=600,c=260;s+=($(window).width()-u)/2,l+=($(window).height()-c)/2;window.open(o,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+c+",width="+u+",top="+l+",left="+s);r.preventDefault()}}(r,t))})},e.exports=n}).call(t,n(1))},function(e,t){window.addEventListener&&window.addEventListener("loadedmetadata",function(e){e.target.setAttribute("data-loadedmetadata",!0)},!0)},function(e,t){!function(e){function t(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||e.opera),t}function n(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+e[n]);return t.join("&")}function r(){this.networks={},this.storageKeyPrefix="shareTools-"}r.prototype.addNetwork=function(e){return this.networks[e.name]=e,this},r.prototype.getUrlFor=function(e,t){var n=this.networks[e];return n.url(t)},r.prototype.shouldShowPostShareDialog=function(e){return null!=localStorage.getItem(this.storageKeyPrefix+"dont-bother")?!1:t()?!1:this.networks[e].postShareDialog||!1},r.prototype.flagDontShowPostShareDialog=function(){localStorage.setItem(this.storageKeyPrefix+"dont-bother","yup")},r.prototype.setupElements=function(t){var n=t instanceof jQuery?t:$(t),r=this;n.each(function(t,n){n=$(n);for(var a in r.networks)r.networks.hasOwnProperty(a)&&$(".share-"+a,n).click(function(t,n){return function(a){var i=encodeURIComponent,o={title:i(n.data("shareTitle")),description:i(n.data("shareDescription")),image:i(n.data("shareImageUrl")),url:i(n.data("shareUrl")),redirectUrl:i(n.data("shareRedirectUrl"))},s=r.getUrlFor(t,o),l=$(this);if("mail"!=t){var u=0,c=0;"undefined"!=typeof e.screenLeft?(u=e.screenLeft,c=e.screenTop):"undefined"!=typeof e.screenX&&(u=e.screenX,tp=e.screenY);var d=600,p=260;u+=($(e).width()-d)/2,c+=($(e).height()-p)/2;var f=e.open(s,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+p+",width="+d+",top="+c+",left="+u);if(r.shouldShowPostShareDialog(t)&&f)var h=setInterval(function(){if(f.closed){clearInterval(h);var e=$('<div class="post-share-modal modal"></div>');e.load("/shared?s="+t,function(t){$("body").append(e),$(".dont-show-again",e).click(function(e){e.preventDefault(),r.flagDontShowPostShareDialog(),$.modal.close()}),e.modal({zIndex:3e4,closeText:'<span class="fa fa-times"></span>'}),r.setupElements(e)})}},500);a.preventDefault()}else l.attr("href",s)}}(a,n))})},$(function(){var t=e.shareTools=new r;t.addNetwork({name:"facebook",url:function(e,t){var r={app_id:"632832353489701",display:"popup",link:e.url,name:e.title,description:e.description,image:e.image,redirect_uri:e.redirectUrl};return"https://www.facebook.com/dialog/feed?"+n(r)},postShareDialog:!1}).addNetwork({name:"facebook-follow",url:function(e,t){return"http://www.facebook.com/plugins/follow.php?href=https%3A%2F%2Fwww.facebook.com%2Ftheonion"},postShareDialog:!1}).addNetwork({name:"twitter",url:function(e,t){var r=e.title;return r=r.substr(0,139),ps={text:r,url:e.url,via:twitter_handle},"https://www.twitter.com/share?"+n(ps)},postShareDialog:!1}).addNetwork({name:"twitter-follow",url:function(e,t){var r=e.title;return r=r.substr(0,139),ps={screen_name:"theonion"},"https://twitter.com/intent/follow?"+n(ps)},postShareDialog:!1}).addNetwork({name:"mail",url:function(e,t){var r=e.url+"%0D%0A%0D%0A"+e.description+"%0D%0A%0D%0Avia theonion.com",a={subject:e.title,body:r};return"mailto:?"+n(a)},postShareDialog:!1}).addNetwork({name:"pinterest",url:function(e,t){var r={url:e.url,media:e.image,description:e.title+" - "+e.description+" @theonion"};return"http://www.pinterest.com/pin/create/button/?"+n(r)},postShareDialog:!1}).addNetwork({name:"pinterest-follow",url:function(e,t){return"http://www.pinterest.com/theonion/"},postShareDialog:!1}).addNetwork({name:"reddit",url:function(e,t){var r={url:e.url,title:e.title};return"http://www.reddit.com/submit?"+n(r)},postShareDialog:!1}).addNetwork({name:"tumblr",url:function(e,t){var r={url:e.url,name:e.title,description:e.description};return"http://www.tumblr.com/share/link?"+n(r)},postShareDialog:!1}).addNetwork({name:"tumblr-follow",url:function(e,t){return"http://www.tumblr.com/follow/theonion"},postShareDialog:!1}).addNetwork({name:"google-plus",url:function(e,t){var r={url:e.url};return"https://plus.google.com/share?"+n(r)},postShareDialog:!1}).addNetwork({name:"google-plus-follow",url:function(e,t){return"https://plus.google.com/101973235797849021923"},postShareDialog:!1}),t.setupElements(".share-widget")})}(window)},function(e,t){window.ns_=window.ns_||{},ns_.StreamSense=ns_.StreamSense||function(){function e(e,t){var r=e||"",a="undefined",i=c.comScore||c.sitestat||function(e){var t,r,i,o,s,u="comScore=",p=d.cookie,f="",h="indexOf",g="substring",m="length",y=n.browserAcceptsLargeURLs()?v.URL_LENGTH_LIMIT:v.RESTRICTED_URL_LENGTH_LIMIT,b="&ns_",w="&",_=c.encodeURIComponent||escape;if(p[h](u)+1)for(o=0,i=p.split(";"),s=i[m];s>o;o++)r=i[o][h](u),r+1&&(f=w+unescape(i[o][g](r+u[m])));e+=b+"_t="+ +new Date+b+"c="+(d.characterSet||d.defaultCharset||"")+f,e.length>y&&e.indexOf(w)>0&&(t=e.substr(0,y-8).lastIndexOf(w),e=(e.substring(0,t)+b+"cut="+_(e.substring(t+1))).substr(0,y)),l.httpGet(e),typeof ns_p===a&&(ns_p={src:e}),ns_p.lastMeasurement=e};if(typeof t!==a){var o=[],s=c.encodeURIComponent||escape;for(var u in t)t.hasOwnProperty(u)&&o.push(s(u)+"="+s(t[u]));/[\?\&]$/.test(r)||(r+="&"),r+=o.join("&")}return i(r)}function t(e,t){for(var r,a=c.encodeURIComponent||escape,i=[],o=v.LABELS_ORDER,s=e.split("?"),l=s[0],u=s[1],p=u.split("&"),f=0,h=p.length;h>f;f++){var g=p[f].split("="),m=unescape(g[0]),y=unescape(g[1]);m&&(t[m]=y)}for(var b={},f=0,h=o.length;h>f;f++){var w=o[f];if(t.hasOwnProperty(w)){var _=t[w];"undefined"!=typeof _&&null!=_&&(b[w]=!0,i.push(a(w)+"="+a(t[w])))}}for(var w in t)if(!b[w]&&t.hasOwnProperty(w)){var _=t[w];"undefined"!=typeof _&&null!=_&&i.push(a(w)+"="+a(t[w]))}r=l+"?"+i.join("&"),r=r+(r.indexOf("&c8=")<0?"&c8="+a(d.title):"")+(r.indexOf("&c7=")<0?"&c7="+a(d.URL):"")+(r.indexOf("&c9=")<0?"&c9="+a(d.referrer):"");var k=n.browserAcceptsLargeURLs()?v.URL_LENGTH_LIMIT:v.RESTRICTED_URL_LENGTH_LIMIT;if(r.length>k&&r.indexOf("&")>0){var T=r.substr(0,k-8).lastIndexOf("&");r=(r.substring(0,T)+"&ns_cut="+a(r.substring(T+1))).substr(0,k)}return r}var n=function(){var e={uid:function(){var e=1;return function(){return+new Date+"_"+e++}}(),filter:function(e,t){var n={};for(var r in t)t.hasOwnProperty(r)&&e(t[r])&&(n[r]=t[r]);return n},extend:function(e){var t,n=arguments.length;e=e||{};for(var r=1;n>r;r++)if(t=arguments[r])for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e},getString:function(e,t){var n=String(e);return null==e?t||"na":n},getLong:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},getInteger:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},getBoolean:function(e,t){var n="true"==String(e).toLowerCase();return null==e?t||!1:n},isNotEmpty:function(e){return"undefined"!=typeof e&&null!=e&&"undefined"!=typeof e.length&&e.length>0},indexOf:function(t,n){var r=-1;return e.forEach(n,function(e,n){e==t&&(r=n)}),r},forEach:function(e,t,n){try{if("function"==typeof t)if(n="undefined"!=typeof n?n:null,"number"!=typeof e.length||"undefined"==typeof e[0]){var r="undefined"!=typeof e.__proto__;for(var a in e)(!r||r&&"undefined"==typeof e.__proto__[a])&&"function"!=typeof e[a]&&t.call(n,e[a],a)}else for(var a=0,i=e.length;i>a;a++)t.call(n,e[a],a)}catch(o){}},regionMatches:function(e,t,n,r,a){if(0>t||0>r||t+a>e.length||r+a>n.length)return!1;for(;--a>=0;){var i=e.charAt(t++),o=n.charAt(r++);if(i!=o)return!1}return!0},size:function(e){var t,n=0;for(var t in e)e.hasOwnProperty(t)&&n++;return n},log:function(e,t){if("undefined"!=typeof t&&t){var n=new Date,r=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();console.log(r,e)}},isTrue:function(e){return"undefined"==typeof e?!1:"string"==typeof e?(e=e.toLowerCase(),"true"===e||"1"===e||"on"===e):!!e},toString:function(t){if("undefined"==typeof t)return"undefined";if("string"==typeof t)return t;if("[object Array]"===Object.prototype.toString.call(t))return t.join(",");if(e.size(t)>0){var n="";for(var r in t)t.hasOwnProperty(r)&&(n+=r+":"+t[r]+";");return n}return t.toString()},exists:function(e){return"undefined"!=typeof e&&null!=e},firstGreaterThan0:function(){for(var e=0,t=arguments.length;t>e;e++){var n=arguments[e];if(n>0)return n}return 0},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},safeGet:function(t,n){return n=e.exists(n)?n:"",e.exists(t)?t:n},getBrowserName:function(){var e,t,n=navigator.userAgent,r=navigator.appName;return-1!=(t=n.indexOf("Opera"))||-1!=(t=n.indexOf("OPR/"))?r="Opera":-1!=(t=n.indexOf("Android"))?r="Android":-1!=(t=n.indexOf("Chrome"))?r="Chrome":-1!=(t=n.indexOf("Safari"))?r="Safari":-1!=(t=n.indexOf("Firefox"))?r="Firefox":-1!=(t=n.indexOf("IEMobile"))?r="Internet Explorer Mobile":"Microsoft Internet Explorer"==r||"Netscape"==r?r="Internet Explorer":(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&(r=n.substring(e,t),r.toLowerCase()==r.toUpperCase()&&(r=navigator.appName)),r},getBrowserFullVersion:function(){var e,t,n,r,a,i=navigator.userAgent,o=navigator.appName,s=""+parseFloat(navigator.appVersion);return-1!=(n=i.indexOf("Opera"))?(s=i.substring(n+6),-1!=(n=i.indexOf("Version"))&&(s=i.substring(n+8))):-1!=(n=i.indexOf("OPR/"))?s=i.substring(n+4):-1!=(n=i.indexOf("Android"))?s=i.substring(n+11):-1!=(n=i.indexOf("Chrome"))?s=i.substring(n+7):-1!=(n=i.indexOf("Safari"))?(s=i.substring(n+7),-1!=(n=i.indexOf("Version"))&&(s=i.substring(n+8))):-1!=(n=i.indexOf("Firefox"))?s=i.substring(n+8):"Microsoft Internet Explorer"==o?(a=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=a.exec(i)&&(s=parseFloat(RegExp.$1))):"Netscape"==o?(a=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=a.exec(i)&&(s=parseFloat(RegExp.$1))):(t=i.lastIndexOf(" ")+1)<(n=i.lastIndexOf("/"))&&(s=i.substring(n+1)),s=s.toString(),-1!=(r=s.indexOf(";"))&&(s=s.substring(0,r)),-1!=(r=s.indexOf(" "))&&(s=s.substring(0,r)),-1!=(r=s.indexOf(")"))&&(s=s.substring(0,r)),e=parseInt(""+s,10),isNaN(e)&&(s=""+parseFloat(navigator.appVersion)),s},browserAcceptsLargeURLs:function(){return null===window.ActiveXObject||!0}};return e}(),r=function(){var e="cs_",t=function(){var t="undefined"!=typeof localStorage?localStorage:{};n.extend(this,{get:function(n){return t[e+n]},set:function(n,r){t[e+n]=r},has:function(n){return e+n in t},remove:function(n){delete t[e+n]},clear:function(){for(var e in t)t.hasOwnProperty(e)&&delete t[e]}})};return t}(),a=function(e,t){var n=new Image;n.onload=function(){t&&t(200)},n.onerror=function(){t&&t()},n.src=e},i=function(e,t,n){n&&setTimeout(n,0)},o=function(){return{dir:function(e){return null},append:function(e,t,n){},write:function(e,t,n){},deleteFile:function(e,t){return!1},read:function(e,t){return null}}}(),s=function(e,t){"undefined"!=typeof engine&&t&&setTimeout(t,0);var n=engine.createHttpClient(),r=n.createRequest("GET",e,null);r.start(),t&&setTimeout(t,0)},l=function(){var e={PLATFORM:"generic",httpGet:a,httpPost:i,Storage:r,IO:o,getCrossPublisherId:function(){return null},getAppName:function(){return Constants.UNKNOWN_VALUE},getAppVersion:function(e){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return""},getPlatformVersion:function(){return""},getPlatformName:function(){return"js"},getRuntimeName:function(){return""},getRuntimeVersion:function(){return""},getResolution:function(){return""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},isCrossPublisherIdChanged:function(){return!1}};return e}(),u=function(){function e(){return"undefined"!=typeof engine&&"undefined"!=typeof engine.stats}function t(){return n.isNotEmpty(engine.stats.device.id)?engine.stats.device.id:n.isNotEmpty(engine.stats.network.mac)?engine.stats.network.mac:null}function a(){if(null==l){var e=t();null!=e?(l=e,u="31",c=e):(l=+new Date+~~(1e3*Math.random()),u="72",c=null)}}var l=null,u=null,c=null;return{PLATFORM:"trilithium",httpGet:s,httpPost:i,Storage:r,IO:o,getCrossPublisherId:function(){return a(),c},getAppName:function(){return n.isNotEmpty(engine.stats.application.name)?engine.stats.application.name:Constants.UNKNOWN_VALUE},getAppVersion:function(e){return n.isNotEmpty(engine.stats.application.version)?engine.stats.application.version:Constants.UNKNOWN_VALUE},getVisitorId:function(){return a(),l},getVisitorIdSuffix:function(){return u},getDeviceName:function(){return n.safeGet(engine.stats.device.platform,"")},getPlatformVersion:function(){return n.safeGet(engine.stats.device.version,"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"trilithium"},getRuntimeVersion:function(){return""},getResolution:function(){return"undefined"!=typeof screen&&"undefined"!=typeof screen.height&&"undefined"!=typeof screen.width?screen.height+"x"+screen.width:""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:e}}();l.autoSelect=function(){u.isCompatible()&&n.extend(l,u)};var c,d,p="undefined"!=typeof window&&"undefined"!=typeof document;p?(c=window,d=document):(c={},d={location:{href:""},title:"",URL:"",referrer:"",cookie:""});var n=n||{};n.filterMap=function(e,t){for(var r in e)-1==n.indexOf(r,t)&&delete e[r]},n.getKeys=function(e,t){var n,r=[];for(n in e)(!t||t.test(n))&&e.hasOwnProperty(n)&&(r[r.length]=n);return r};var f=function(){var e=["play","pause","end","buffer","keep-alive","hb","custom","ad_play","ad_pause","ad_end","ad_click"];return{PLAY:0,PAUSE:1,END:2,BUFFER:3,KEEP_ALIVE:4,HEART_BEAT:5,CUSTOM:6,AD_PLAY:7,AD_PAUSE:8,AD_END:9,AD_CLICK:10,toString:function(t){return e[t]}}}(),h=function(){var e=[f.END,f.PLAY,f.PAUSE,f.BUFFER];return{IDLE:0,PLAYING:1,PAUSED:2,BUFFERING:3,toEventType:function(t){return e[t]}}}(),g={ADPLAY:f.AD_PLAY,ADPAUSE:f.AD_PAUSE,ADEND:f.AD_END,ADCLICK:f.AD_CLICK},v={STREAMSENSE_VERSION:"4.1411.18",DEFAULT_PLAYERNAME:"streamsense",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sq","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_pt","ns_st_pa","ns_st_ad","ns_st_li","ns_st_ci","ns_ap_jb","ns_ap_res","ns_ap_c12m","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_bt","ns_st_bp","ns_st_pc","ns_st_pp","ns_st_br","ns_st_ub","ns_st_vo","ns_st_ws","ns_st_pl","ns_st_pr","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9"]},m=function(){var e=function(){function e(e,t){var n=t[e];null!=n&&(r[e]=n)}var t,r,a=this,i=0,o=0,s=0,l=0,u=0,c=0;n.extend(this,{reset:function(e){null!=e&&e.length>0?n.filterMap(r,e):r={},r.hasOwnProperty("ns_st_cl")||(r.ns_st_cl="0"),r.hasOwnProperty("ns_st_pn")||(r.ns_st_pn="1"),r.hasOwnProperty("ns_st_tp")||(r.ns_st_tp="1"),a.setPauses(0),a.setStarts(0),a.setBufferingTime(0),a.setBufferingTimestamp(-1),a.setPlaybackTime(0),a.setPlaybackTimestamp(-1)},setLabels:function(e,t){null!=e&&n.extend(r,e),a.setRegisters(r,t)},getLabels:function(){return r},setLabel:function(e,t){var n={};n[e]=t,a.setLabels(n,null)},getLabel:function(e){return r[e]},getClipId:function(){return("undefined"==typeof t||null==t)&&a.setClipId("1"),t},setClipId:function(e){t=e},setRegisters:function(t,n){var r=t.ns_st_cn;null!=r&&(a.setClipId(r),delete t.ns_st_cn),r=t.ns_st_bt,null!=r&&(s=Number(r),delete t.ns_st_bt),e("ns_st_cl",t),e("ns_st_pn",t),e("ns_st_tp",t),e("ns_st_ub",t),e("ns_st_br",t),n!=h.PLAYING&&null!=n||(r=t.ns_st_sq,null!=r&&(o=Number(r),delete t.ns_st_sq)),n!=h.BUFFERING&&(r=t.ns_st_pt,null!=r&&(u=Number(r),delete t.ns_st_pt)),n!=h.PAUSED&&n!=h.IDLE&&null!=n||(r=t.ns_st_pc,null!=r&&(i=Number(r),delete t.ns_st_pc))},createLabels:function(e,t){var r=t||{};return r.ns_st_cn=a.getClipId(),r.ns_st_bt=String(a.getBufferingTime()),e!=f.PLAY&&null!=e||(r.ns_st_sq=String(o)),e!=f.PAUSE&&e!=f.END&&e!=f.KEEP_ALIVE&&e!=f.HEART_BEAT&&null!=e||(r.ns_st_pt=String(a.getPlaybackTime()),r.ns_st_pc=String(i)),n.extend(r,a.getLabels()),r},incrementPauses:function(){i++},incrementStarts:function(){o++},getBufferingTime:function(){var e=s;return l>=0&&(e+=+new Date-l),e},setBufferingTime:function(e){s=e},getPlaybackTime:function(){var e=u;return c>=0&&(e+=+new Date-c),e},setPlaybackTime:function(e){u=e},getPlaybackTimestamp:function(){return c},setPlaybackTimestamp:function(e){c=e},getBufferingTimestamp:function(){return l},setBufferingTimestamp:function(e){l=e},getPauses:function(){return i},setPauses:function(e){i=e},getStarts:function(){return o},setStarts:function(e){o=e}}),r={},a.reset()};return e}(),y=function(){var e=function(){var e,t,r=this,a=null,i=0,o=0,s=0,l=0,u=0,c=0,d=!1;n.extend(this,{reset:function(e){null!=e&&e.length>0?n.filterMap(t,e):t={},r.setPlaylistId(+new Date+"_"+c),r.setBufferingTime(0),r.setPlaybackTime(0),r.setPauses(0),r.setStarts(0),r.setRebufferCount(0),d=!1},setLabels:function(e,a){null!=e&&n.extend(t,e),r.setRegisters(t,a)},getLabels:function(){return t},setLabel:function(e,t){var n={};n[e]=t,r.setLabels(n,null)},getLabel:function(e){return t[e]},getClip:function(){return a},getPlaylistId:function(){return e},setPlaylistId:function(t){e=t},setRegisters:function(t,n){var r=t.ns_st_sp;null!=r&&(i=Number(r),delete t.ns_st_sp),r=t.ns_st_bc,null!=r&&(s=Number(r),delete t.ns_st_bc),r=t.ns_st_bp,null!=r&&(l=Number(r),delete t.ns_st_bp),r=t.ns_st_id,null!=r&&(e=r,delete t.ns_st_id),n!=h.BUFFERING&&(r=t.ns_st_pa,null!=r&&(u=Number(r),delete t.ns_st_pa)),n!=h.PAUSED&&n!=h.IDLE&&null!=n||(r=t.ns_st_pp,null!=r&&(o=Number(r),delete t.ns_st_pp))},createLabels:function(t,a){var l=a||{};return l.ns_st_bp=String(r.getBufferingTime()),l.ns_st_sp=String(i),l.ns_st_id=String(e),s>0&&(l.ns_st_bc=String(s)),t!=f.PAUSE&&t!=f.END&&t!=f.KEEP_ALIVE&&t!=f.HEART_BEAT&&null!=t||(l.ns_st_pa=String(r.getPlaybackTime()),l.ns_st_pp=String(o)),t!=f.PLAY&&null!=t||r.didFirstPlayOccurred()||(l.ns_st_pb="1",r.setFirstPlayOccurred(!0)),n.extend(l,r.getLabels()),l},incrementStarts:function(){i++},incrementPauses:function(){o++,a.incrementPauses()},setPlaylistCounter:function(e){c=e},incrementPlaylistCounter:function(){c++},addPlaybackTime:function(e){if(a.getPlaybackTimestamp()>=0){var t=e-a.getPlaybackTimestamp();a.setPlaybackTimestamp(-1),a.setPlaybackTime(a.getPlaybackTime()+t),r.setPlaybackTime(r.getPlaybackTime()+t)}},addBufferingTime:function(e){if(a.getBufferingTimestamp()>=0){var t=e-a.getBufferingTimestamp();a.setBufferingTimestamp(-1),a.setBufferingTime(a.getBufferingTime()+t),r.setBufferingTime(r.getBufferingTime()+t)}},getBufferingTime:function(){var e=l;return a.getBufferingTimestamp()>=0&&(e+=+new Date-a.getBufferingTimestamp()),e},setBufferingTime:function(e){l=e},getPlaybackTime:function(){var e=u;return a.getPlaybackTimestamp()>=0&&(e+=+new Date-a.getPlaybackTimestamp()),e},setPlaybackTime:function(e){u=e},getStarts:function(){return i},setStarts:function(e){i=e},getPauses:function(){return o},setPauses:function(e){o=e},getRebufferCount:function(){return s},incrementRebufferCount:function(){s++},setRebufferCount:function(e){s=e},didFirstPlayOccurred:function(){return d},setFirstPlayOccurred:function(e){d=e}}),a=new m,t={},r.reset()};return e}(),b=function(){var r=function(r,a){function i(e){var t=0;if(null!=pe)for(var n=0;n<pe.length;n++){var r=pe[n],a=r.playingtime;if(!a||a>e){t=r.interval;break}}return t}function o(){d();var e=i(ue.getClip().getPlaybackTime());if(e>0){var t=ge>0?ge:e;Q=setTimeout(c,t)}ge=0}function s(){d();var e=i(ue.getClip().getPlaybackTime());ge=e-ue.getClip().getPlaybackTime()%e,null!=Q&&d()}function u(){ge=0,me=0,ve=0}function c(){ve++;var e=O(f.HEART_BEAT,null);P(e),ge=0,o()}function d(){null!=Q&&(clearTimeout(Q),Q=null)}function p(){m(),Y=setTimeout(g,fe)}function g(){var e=O(f.KEEP_ALIVE,null);P(e),le++,p()}function m(){null!=Y&&(clearTimeout(Y),Y=null)}function b(){_(),re.isPauseOnBufferingEnabled()&&x(h.PAUSED)&&(X=setTimeout(w,he))}function w(){if(J==h.PLAYING){ue.incrementRebufferCount(),ue.incrementPauses();var e=O(f.PAUSE,null);P(e),le++,J=h.PAUSED}}function _(){null!=X&&(clearTimeout(X),X=null)}function k(e){return e==h.PLAYING||e==h.PAUSED}function T(){z&&(clearTimeout(z),z=null)}function E(e){return e==f.PLAY?h.PLAYING:e==f.PAUSE?h.PAUSED:e==f.BUFFER?h.BUFFERING:e==f.END?h.IDLE:null}function A(e,t,r){if(T(),r)z=setTimeout(function(e,t){return function(){A(e,t)}}(e,t),r);else if(U(e)){var a=R(),i=oe,o=V(t),s=i>=0?o-i:0;L(R(),t),N(e,t),B(R()),F(e);for(var l=0,u=ne.length;u>l;l++)ne[l](a,e,t,s);C(t),ue.setRegisters(t,e),ue.getClip().setRegisters(t,e);var c=O(h.toEventType(e),t);n.extend(c,t),x(W)&&(P(c),J=W,le++)}}function C(e){var t=e.ns_st_mp;null!=t&&(Z=t,delete e.ns_st_mp),t=e.ns_st_mv,null!=t&&(ee=t,delete e.ns_st_mv),t=e.ns_st_ec,null!=t&&(le=Number(t),delete e.ns_st_ec)}function P(e,n){void 0===n&&(n=!0),n&&I(e);var r=re.getPixelURL();if(K){if(!S()){var a=be.am,i=be.et,o=a.newApplicationMeasurement(K,i.HIDDEN,e,r);K.getQueue().offer(o)}}else r&&l.httpGet(t(r,e))}function S(){var e=K.getAppContext(),t=K.getSalt(),n=K.getPixelURL();return null==e||null==t||0==t.length||null==n||0==n.length}function I(e){te=O(null),n.extend(te,e)}function L(e,t){var r=V(t);if(e==h.PLAYING)ue.addPlaybackTime(r),s(),m();else if(e==h.BUFFERING)ue.addBufferingTime(r),_();else if(e==h.IDLE){var a=n.getKeys(ue.getClip().getLabels());ue.getClip().reset(a)}}function N(e,t){var n=V(t),r=M(t);se=r,e==h.PLAYING?(o(),p(),ue.getClip().setPlaybackTimestamp(n),x(e)&&(ue.getClip().incrementStarts(),ue.getStarts()<1&&ue.setStarts(1))):e==h.PAUSED?x(e)&&ue.incrementPauses():e==h.BUFFERING?(ue.getClip().setBufferingTimestamp(n),de&&b()):e==h.IDLE&&u()}function x(e){return e!=h.PAUSED&&e!=h.IDLE||J!=h.IDLE&&null!=J?e!=h.BUFFERING&&J!=e:!1}function M(e){var t=-1;return e.hasOwnProperty("ns_st_po")&&(t=n.getInteger(e.ns_st_po)),t}function V(e){var t=-1;return e.hasOwnProperty("ns_ts")&&(t=Number(e.ns_ts)),t}function U(e){return null!=e&&R()!=e}function F(e){W=e,oe=+new Date}function R(){return W}function B(e){G=e}function O(){var e,t;1==arguments.length?(e=h.toEventType(W),t=arguments[0]):(e=arguments[0],t=arguments[1]);var r={};if("undefined"!=typeof document){var a=document;r.c7=a.URL,r.c8=a.title,r.c9=a.referrer}return null!=t&&n.extend(r,t),r.hasOwnProperty("ns_ts")||(r.ns_ts=String(+new Date)),null!=e&&!r.hasOwnProperty("ns_st_ev")&&(r.ns_st_ev=f.toString(e)),re.isPersistentLabelsShared()&&K&&n.extend(r,K.getLabels()),n.extend(r,re.getLabels()),D(e,r),ue.createLabels(e,r),ue.getClip().createLabels(e,r),r.hasOwnProperty("ns_st_mp")||(r.ns_st_mp=Z),r.hasOwnProperty("ns_st_mv")||(r.ns_st_mv=ee),r.hasOwnProperty("ns_st_ub")||(r.ns_st_ub="0"),r.hasOwnProperty("ns_st_br")||(r.ns_st_br="0"),r.hasOwnProperty("ns_st_pn")||(r.ns_st_pn="1"),r.hasOwnProperty("ns_st_tp")||(r.ns_st_tp="1"),r.hasOwnProperty("ns_st_it")||(r.ns_st_it="c"),r.ns_st_sv=v.STREAMSENSE_VERSION,r.ns_type="hidden",r}function D(e,t){var r=t||{};if(r.ns_st_ec=String(le),!r.hasOwnProperty("ns_st_po")){var a=se,i=V(r);(e==f.PLAY||e==f.KEEP_ALIVE||e==f.HEART_BEAT||null==e&&W==h.PLAYING)&&(a+=i-ue.getClip().getPlaybackTimestamp()),r.ns_st_po=n.getInteger(a)}return e==f.HEART_BEAT&&(r.ns_st_hc=String(ve)),r}function q(e){var t=V(e);0>t&&(e.ns_ts=String(+new Date))}function j(e,t,n){t=t||{},t.ns_st_ad=1,e>=f.AD_PLAY&&e<=f.AD_CLICK&&re.notify(e,t,n)}function $(e,t){re.notify(f.CUSTOM,e,t)}var H,z,G,W,K,X,Y,Q,J,Z,ee,te,ne,re=this,ae=500,ie=null,oe=0,se=0,le=0,ue=null,ce=!0,de=!0,pe=v.DEFAULT_HEARTBEAT_INTERVAL,fe=v.DEFAULT_KEEP_ALIVE_INTERVAL,he=v.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,ge=0,ve=0,me=0,ye=!1,be={};l.autoSelect(),n.extend(this,{reset:function(e){ue.reset(e),ue.setPlaylistCounter(0),ue.setPlaylistId(+new Date+"_1"),ue.getClip().reset(e),null==e||e.isEmpty()?H={}:n.filterMap(H,e),le=1,ve=0,s(),u(),m(),_(),T(),W=h.IDLE,G=null,oe=-1,J=null,Z=v.DEFAULT_PLAYERNAME,ee=v.STREAMSENSE_VERSION,te=null},setPauseOnBufferingInterval:function(e){he=e},getPauseOnBufferingInterval:function(){return he},setKeepAliveInterval:function(e){fe=e},getKeepAliveInterval:function(){return fe},setHeartbeatIntervals:function(e){pe=e},notify:function(){var e,t,r,a;t=arguments[0],3==arguments.length?(r=arguments[1],a=arguments[2]):(r={},a=arguments[1]),e=E(t);var i=n.extend({},r);if(q(i),i.hasOwnProperty("ns_st_po")||(i.ns_st_po=n.getInteger(a).toString()),t==f.PLAY||t==f.PAUSE||t==f.BUFFER||t==f.END)re.isPausePlaySwitchDelayEnabled()&&k(W)&&k(e)&&(W!=h.PLAYING||e!=h.PAUSED||z)?A(e,i,ae):A(e,i);else{var o=O(t,i);n.extend(o,i),P(o,!1),le++}},getLabels:function(){return H},getState:function(){return W},setLabels:function(e){null!=e&&(null==H?H=e:n.extend(H,e))},getLabel:function(e){return H[e]},setLabel:function(e,t){null==t?delete H[e]:H[e]=t},setPixelURL:function(e){if(null==e||0==e.length)return null;var t=decodeURIComponent||unescape,n=e.indexOf("?");if(n>=0){if(n<e.length-1){for(var r=e.substring(n+1).split("&"),a=0,i=r.length;i>a;a++){var o=r[a],s=o.split("=");2==s.length?re.setLabel(s[0],t(s[1])):1==s.length&&re.setLabel(v.PAGE_NAME_LABEL,t(s[0]))}e=e.substring(0,n+1)}}else e+="?";return ie=e},getPixelURL:function(){return ie?ie:"undefined"!=typeof ns_p&&"string"==typeof ns_p.src?ie=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?ie=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null;
},isPersistentLabelsShared:function(){return ce},setPersistentLabelsShared:function(e){ce=e},isPauseOnBufferingEnabled:function(){return de},setPauseOnBufferingEnabled:function(e){de=e},isPausePlaySwitchDelayEnabled:function(){return ye},setPausePlaySwitchDelayEnabled:function(e){ye=e},setPausePlaySwitchDelay:function(e){e&&e>0&&(ae=e)},getPausePlaySwitchDelay:function(){return ae},setClip:function(e,t){var n=!1;return W==h.IDLE&&(ue.getClip().reset(),ue.getClip().setLabels(e,null),t&&ue.incrementStarts(),n=!0),n},setPlaylist:function(e){var t=!1;return W==h.IDLE&&(ue.incrementPlaylistCounter(),ue.reset(),ue.getClip().reset(),ue.setLabels(e,null),t=!0),t},importState:function(e){reset();var t=n.extend({},e);ue.setRegisters(t,null),ue.getClip().setRegisters(t,null),C(t),le++},exportState:function(){return te},getVersion:function(){return v.STREAMSENSE_VERSION},addListener:function(e){ne.push(e)},removeListener:function(e){ne.splice(n.indexOf(e,ne),1)},getClip:function(){return ue.getClip()},getPlaylist:function(){return ue}}),n.extend(this,{adNotify:j,customNotify:$,viewNotify:function(t,n){t=t||re.getPixelURL(),t&&e(t,n)}}),ns_.comScore&&(be=ns_.comScore.exports,K=be.c()),H={},le=1,W=h.IDLE,ue=new y,X=null,de=!0,Q=null,ve=0,u(),Y=null,z=null,ye=!1,J=null,se=0,ne=[],re.reset(),r&&re.setLabels(r),a&&re.setPixelURL(a)};return function(e){function t(e,t){return k[E]||a(e,t)}function r(){E=-1;for(var e=0;T>=e;e++)if(k.hasOwnProperty(e)){E=e;break}return ns_.StreamSense.activeIndex=E,E}function a(e,t){return e=e||null,t=t||null,e&&"object"==typeof e&&(t=e,e=null),k[++T]=new ns_.StreamSense(t,e),r(),k[T]}function i(){var e=!1,t=E;if("number"==typeof arguments[0]&&isFinite(arguments[0]))t=arguments[0];else if(arguments[0]instanceof ns_.StreamSense)for(var n in k)if(k[n]===arguments[0]){t=n;break}return k.hasOwnProperty(t)&&(e=k[t],delete k[t],e.reset(),r()),e}function o(e){return e=e||{},t().setPlaylist(e),t().getPlaylist()}function s(e,n,r){return e=e||{},"number"==typeof n&&(e.ns_st_cn=n),t().setClip(e,r),t().getClip()}function l(e,n,r){return"undefined"==typeof e?!1:(r=r||null,n=n||{},t().notify(e,n,r))}function u(e){"undefined"!=typeof e&&t().setLabels(e)}function c(){return t().getLabels()}function d(e){"undefined"!=typeof e&&t().getPlaylist().setLabels(e)}function p(){return t().getPlaylist().getLabels()}function f(e){"undefined"!=typeof e&&t().getClip().setLabels(e)}function h(){return t().getClip().getLabels()}function g(e){return t().reset(e||{})}function v(e){return t().getPlaylist().reset(e||{})}function m(e){return t().getClip().reset(e||{})}function y(e){return e=e||{},t().viewNotify(null,e)}function b(e,n){return arguments.length>2&&(e=arguments[1],n=arguments[2]),e=e||{},"number"==typeof n&&(e.ns_st_po=n),t().customNotify(e,n)}function w(){return t().exportState()}function _(e){t().importState(e)}var k={},T=-1,E=-1;n.extend(e,{activeIndex:E,newInstance:a,"new":a,destroyInstance:i,destroy:i,newPlaylist:o,newClip:s,notify:l,setLabels:u,getLabels:c,setPlaylistLabels:d,getPlaylistLabels:p,setClipLabels:f,getClipLabels:h,resetInstance:g,resetPlaylist:v,resetClip:m,viewEvent:y,customEvent:b,exportState:w,importState:_})}(r),r}();return b.AdEvents=g,b.PlayerEvents=f,ns_.StreamingTag=ns_.StreamingTag||function(){var e=function(){var e=function(e){function t(){if(!ns_.comScore&&n.exists(e))if(w=n.isTrue(e.debug),n.exists(e.customerC2)){var t=e.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");y.setPixelURL(t+".scorecardresearch.com/p?c1=2"),y.setLabel("c2",e.customerC2)}else y.setPixelURL(""),w&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.");y.setLabel("ns_st_it","r")}function r(e){return n.exists(e)||(e={}),n.exists(e.ns_st_ci)||(e.ns_st_ci="0"),n.exists(e.c3)||(e.c3="*null"),n.exists(e.c4)||(e.c4="*null"),n.exists(e.c6)||(e.c6="*null"),e}function a(e){return p>0&&e>=p?g+=e-p:g=0,g}function i(e){y.getState()!=h.IDLE&&y.getState()!=h.PAUSED?y.notify(f.END,a(e)):y.getState()==h.PAUSED&&y.notify(f.END,g)}function o(e){return s("ns_st_ci",v,e)&&s("c3",v,e)&&s("c4",v,e)&&s("c6",v,e)}function s(e,t,r){if(n.exists(e)&&n.exists(t)&&n.exists(r)){var a=t[e],i=r[e];return n.exists(a)&&n.exists(i)&&a===i}return!1}function l(e,t){i(e),d++;var r={ns_st_cn:d,ns_st_pn:"1",ns_st_tp:"0"};n.extend(r,t),y.setClip(r),v=t,p=e,g=0,y.notify(f.PLAY,g)}function u(e){var t=+new Date;i(t),d++,e=r(e);var a={ns_st_cn:d,ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};n.extend(a,e),y.setClip(a),g=0,y.notify(f.PLAY,g),p=t,m=!1}function c(e){var t=+new Date;e=r(e),m&&o(e)?(y.getClip().setLabels(e),y.getState()!=h.PLAYING&&(p=t,y.notify(f.PLAY,g))):l(t,e),m=!0}var d=0,p=0,g=0,v=null,m=!1,y=new b,w=!1;n.extend(this,{playAdvertisement:function(){w&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead.");var e={ns_st_ct:"va"};u(e)},playVideoAdvertisement:function(e){var t={ns_st_ct:"va"};e&&n.extend(t,e),u(t)},playAudioAdvertisement:function(e){var t={ns_st_ct:"aa"};e&&n.extend(t,e),u(t)},playContentPart:function(e){w&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var t={ns_st_ct:"vc"};e&&n.extend(t,e),c(t)},playVideoContentPart:function(e){var t={ns_st_ct:"vc"};e&&n.extend(t,e),c(t)},playAudioContentPart:function(e){var t={ns_st_ct:"ac"};e&&n.extend(t,e),c(t)},stop:function(){var e=+new Date;y.notify(f.PAUSE,a(e))}}),t()};return function(e){}(e),e}();return e}(),b}()},function(e,t){var n=function(){function e(){if(!H){try{var e=R.getElementsByTagName("body")[0].appendChild(m("span"));e.parentNode.removeChild(e)}catch(t){return}H=!0;for(var n=D.length,r=0;n>r;r++)D[r]()}}function t(e){H?e():D[D.length]=e}function r(e){if(typeof F.addEventListener!=I)F.addEventListener("load",e,!1);else if(typeof R.addEventListener!=I)R.addEventListener("load",e,!1);else if(typeof F.attachEvent!=I)y(F,"onload",e);else if("function"==typeof F.onload){var t=F.onload;F.onload=function(){t(),e()}}else F.onload=e}function a(){O?i():o()}function i(){var e=R.getElementsByTagName("body")[0],t=m(L);t.setAttribute("type",M);var n=e.appendChild(t);if(n){var r=0;!function(){if(typeof n.GetVariable!=I){var a=n.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),W.pv=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}else if(10>r)return r++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,o()}()}else o()}function o(){var e=q.length;if(e>0)for(var t=0;e>t;t++){var n=q[t].id,r=q[t].callbackFn,a={success:!1,id:n};if(W.pv[0]>0){var i=v(n);if(i)if(!b(q[t].swfVersion)||W.wk&&W.wk<312)if(q[t].expressInstall&&l()){var o={};o.data=q[t].expressInstall,o.width=i.getAttribute("width")||"0",o.height=i.getAttribute("height")||"0",i.getAttribute("class")&&(o.styleclass=i.getAttribute("class")),i.getAttribute("align")&&(o.align=i.getAttribute("align"));for(var d={},p=i.getElementsByTagName("param"),f=p.length,h=0;f>h;h++)"movie"!=p[h].getAttribute("name").toLowerCase()&&(d[p[h].getAttribute("name")]=p[h].getAttribute("value"));u(o,d,n,r)}else c(i),r&&r(a);else _(n,!0),r&&(a.success=!0,a.ref=s(n),r(a))}else if(_(n,!0),r){var g=s(n);g&&typeof g.SetVariable!=I&&(a.success=!0,a.ref=g),r(a)}}}function s(e){var t=null,n=v(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=I)t=n;else{var r=n.getElementsByTagName(L)[0];r&&(t=r)}return t}function l(){return!z&&b("6.0.65")&&(W.win||W.mac)&&!(W.wk&&W.wk<312)}function u(e,t,n,r){z=!0,A=r||null,C={success:!1,id:n};var a=v(n);if(a){"OBJECT"==a.nodeName?(T=d(a),E=null):(T=a,E=n),e.id=V,(typeof e.width==I||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==I||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),R.title=R.title.slice(0,47)+" - Flash Player Installation";var i=W.ie&&W.win?"ActiveX":"PlugIn",o="MMredirectURL="+F.location.toString().replace(/&/g,"%26")+"&MMplayerType="+i+"&MMdoctitle="+R.title;if(typeof t.flashvars!=I?t.flashvars+="&"+o:t.flashvars=o,W.ie&&W.win&&4!=a.readyState){var s=m("div");n+="SWFObjectNew",s.setAttribute("id",n),a.parentNode.insertBefore(s,a),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}p(e,t,n)}}function c(e){if(W.ie&&W.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=m("div");if(W.win&&W.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(L)[0];if(n){var r=n.childNodes;if(r)for(var a=r.length,i=0;a>i;i++)1==r[i].nodeType&&"PARAM"==r[i].nodeName||8==r[i].nodeType||t.appendChild(r[i].cloneNode(!0))}}return t}function p(e,t,n){var r,a=v(n);if(W.wk&&W.wk<312)return r;if(a)if(typeof e.id==I&&(e.id=n),W.ie&&W.win){var i="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?i+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(i+=" "+o+'="'+e[o]+'"'));var s="";for(var l in t)t[l]!=Object.prototype[l]&&(s+='<param name="'+l+'" value="'+t[l]+'" />');a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+s+"</object>",j[j.length]=e.id,r=v(e.id)}else{var u=m(L);u.setAttribute("type",M);for(var c in e)e[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?u.setAttribute("class",e[c]):"classid"!=c.toLowerCase()&&u.setAttribute(c,e[c]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&f(u,d,t[d]);a.parentNode.replaceChild(u,a),r=u}return r}function f(e,t,n){var r=m("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function h(e){var t=v(e);t&&"OBJECT"==t.nodeName&&(W.ie&&W.win?(t.style.display="none",function(){4==t.readyState?g(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function g(e){var t=v(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function v(e){var t=null;try{t=R.getElementById(e)}catch(n){}return t}function m(e){return R.createElement(e)}function y(e,t,n){e.attachEvent(t,n),$[$.length]=[e,t,n]}function b(e){var t=W.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function w(e,t,n,r){if(!W.ie||!W.mac){var a=R.getElementsByTagName("head")[0];if(a){var i=n&&"string"==typeof n?n:"screen";if(r&&(P=null,S=null),!P||S!=i){var o=m("style");o.setAttribute("type","text/css"),o.setAttribute("media",i),P=a.appendChild(o),W.ie&&W.win&&typeof R.styleSheets!=I&&R.styleSheets.length>0&&(P=R.styleSheets[R.styleSheets.length-1]),S=i}W.ie&&W.win?P&&typeof P.addRule==L&&P.addRule(e,t):P&&typeof R.createTextNode!=I&&P.appendChild(R.createTextNode(e+" {"+t+"}"))}}}function _(e,t){if(G){var n=t?"visible":"hidden";H&&v(e)?v(e).style.visibility=n:w("#"+e,"visibility:"+n)}}function k(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=I?encodeURIComponent(e):e}var T,E,A,C,P,S,I="undefined",L="object",N="Shockwave Flash",x="ShockwaveFlash.ShockwaveFlash",M="application/x-shockwave-flash",V="SWFObjectExprInst",U="onreadystatechange",F=window,R=document,B=navigator,O=!1,D=[a],q=[],j=[],$=[],H=!1,z=!1,G=!0,W=function(){var e=typeof R.getElementById!=I&&typeof R.getElementsByTagName!=I&&typeof R.createElement!=I,t=B.userAgent.toLowerCase(),n=B.platform.toLowerCase(),r=n?/win/.test(n):/win/.test(t),a=n?/mac/.test(n):/mac/.test(t),i=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,o=!1,s=[0,0,0],l=null;if(typeof B.plugins!=I&&typeof B.plugins[N]==L)l=B.plugins[N].description,!l||typeof B.mimeTypes!=I&&B.mimeTypes[M]&&!B.mimeTypes[M].enabledPlugin||(O=!0,o=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof F.ActiveXObject!=I)try{var u=new ActiveXObject(x);u&&(l=u.GetVariable("$version"),l&&(o=!0,l=l.split(" ")[1].split(","),s=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(c){}return{w3:e,pv:s,wk:i,ie:o,win:r,mac:a}}();(function(){W.w3&&((typeof R.readyState!=I&&"complete"==R.readyState||typeof R.readyState==I&&(R.getElementsByTagName("body")[0]||R.body))&&e(),H||(typeof R.addEventListener!=I&&R.addEventListener("DOMContentLoaded",e,!1),W.ie&&W.win&&(R.attachEvent(U,function(){"complete"==R.readyState&&(R.detachEvent(U,arguments.callee),e())}),F==top&&!function(){if(!H){try{R.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),W.wk&&!function(){return H?void 0:/loaded|complete/.test(R.readyState)?void e():void setTimeout(arguments.callee,0)}(),r(e)))})(),function(){W.ie&&W.win&&window.attachEvent("onunload",function(){for(var e=$.length,t=0;e>t;t++)$[t][0].detachEvent($[t][1],$[t][2]);for(var r=j.length,a=0;r>a;a++)h(j[a]);for(var i in W)W[i]=null;W=null;for(var o in n)n[o]=null;n=null})}();return{registerObject:function(e,t,n,r){if(W.w3&&e&&t){var a={};a.id=e,a.swfVersion=t,a.expressInstall=n,a.callbackFn=r,q[q.length]=a,_(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){return W.w3?s(e):void 0},embedSWF:function(e,n,r,a,i,o,s,c,d,f){var h={success:!1,id:n};W.w3&&!(W.wk&&W.wk<312)&&e&&n&&r&&a&&i?(_(n,!1),t(function(){r+="",a+="";var t={};if(d&&typeof d===L)for(var g in d)t[g]=d[g];t.data=e,t.width=r,t.height=a;var v={};if(c&&typeof c===L)for(var m in c)v[m]=c[m];if(s&&typeof s===L)for(var y in s)typeof v.flashvars!=I?v.flashvars+="&"+y+"="+s[y]:v.flashvars=y+"="+s[y];if(b(i)){var w=p(t,v,n);t.id==n&&_(n,!0),h.success=!0,h.ref=w}else{if(o&&l())return t.data=o,void u(t,v,n,f);_(n,!0)}f&&f(h)})):f&&f(h)},switchOffAutoHideShow:function(){G=!1},ua:W,getFlashPlayerVersion:function(){return{major:W.pv[0],minor:W.pv[1],release:W.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(e,t,n){return W.w3?p(e,t,n):void 0},showExpressInstall:function(e,t,n,r){W.w3&&l()&&u(e,t,n,r)},removeSWF:function(e){W.w3&&h(e)},createCSS:function(e,t,n,r){W.w3&&w(e,t,n,r)},addDomLoadEvent:t,addLoadEvent:r,getQueryParamValue:function(e){var t=R.location.search||R.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return k(t);for(var n=t.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return k(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(z){var e=v(V);e&&T&&(e.parentNode.replaceChild(T,e),E&&(_(E,!0),W.ie&&W.win&&(T.style.display="block")),A&&A(C)),z=!1}}}}()},function(e,t){var n=function(e,t){return window.AnalyticsManager?(this.player=e,this.handleTimeUpdate=this.handleTimeUpdate.bind(this),this.handlePlayerEnded=this.handlePlayerEnded.bind(this),this.sentEvents={},e.on("timeupdate",this.handleTimeUpdate),void e.on("ended",this.handlePlayerEnded)):void console.error("AnalyticsManager unavailable")};n.prototype.handlePlayerEnded=function(){this.sendThirtySeconds()},n.prototype.sendAnalyticsEvent=function(e,t){if(!this.sentEvents[e]){var n={eventCategory:"Video:"+window.channelName,eventAction:t,eventLabel:window.videoUrl};AnalyticsManager.sendEvent(n),this.sentEvents[e]=n}},n.prototype.sendThreeSeconds=function(){this.sendAnalyticsEvent("threeSeconds","3 seconds")},n.prototype.sendThirtySeconds=function(){this.sendAnalyticsEvent("thirtySeconds","30 seconds")},n.prototype.sendNinetyFivePercentComplete=function(){this.sendAnalyticsEvent("ninetyFivePercent","95 percent")},n.prototype.handleTimeUpdate=function(){if(!this.player.ads||"ad-playback"!==this.player.ads.state){var e=this.player.currentTime(),t=this.player.duration(),n=.95*t;if(0===t)return void(this.warned||(console.warn("Video has an empty duration"),this.warned=!0));e>=3&&this.sendThreeSeconds(),e>=30&&this.sendThirtySeconds(),e>=n&&this.sendNinetyFivePercentComplete()}};var r=function(e){var t=this;new n(t,e)};videojs.plugin("videoanalytics",r),e.exports=n},function(e,t){var n=function(e,t){this.player=e,this.videoEnded=this.videoEnded.bind(this);var n={countdown:5,next:null,allowCountdown:!0,replayAllow:!0};this.player.on("ended",this.videoEnded),this.settings=$.extend(n,t),this.$overlay=null};n.prototype.videoEnded=function(){var e=this.player;e.ads&&"ad-playback"===e.ads.state||(null!==this.settings.countdown&&(this.timeLeft=parseInt(this.settings.countdown,10)),null===this.$overlay&&this.setupEndcard())},n.prototype.setupEndcard=function(){$.get(this.settings.URL,this.endcardFetched.bind(this))},n.prototype.teardownEndcard=function(){this.$overlay&&($(this.player.el()).find(".endcard").remove(),this.$overlay=null),this.timeout&&this.clearCountdown(),this.player.posterImage.hide(),this.player.controlBar.show()},n.prototype.replayVideo=function(){this.settings.replayAllow&&(this.player.trigger("replay"),this.teardownEndcard(),clearInterval(this.timeout),this.player.play())},n.prototype.setupReplay=function(){var e=this.$overlay.find(".ec-replay")[0];$(e).on("click",this.replayVideo.bind(this))},n.prototype.startCountdown=function(){null!==this.settings.countdown&&(this.timeout=setInterval(this.updateCountdown.bind(this),1e3))},n.prototype.toggleCountdown=function(){var e=$(".pause");e.toggleClass("paused").data("trackLabel","#"),this.timeout?(e.data("trackAction","Autostart: Pause"),this.clearCountdown()):(e.data("trackAction","Autostart: Play"),this.startCountdown())},n.prototype.clearCountdown=function(){clearInterval(this.timeout),this.timeout=null},n.prototype.setupCountdown=function(){this.$overlay.find(".count, .pause").addClass("visible"),this.$overlay.find(".countdown").length>0&&(this.$overlay.find(".pause").on("click",this.toggleCountdown.bind(this)),this.startCountdown())},n.prototype.updateCountdown=function(){if(this.timeLeft>0)this.timeLeft-=1,$(this.player.el()).find(".count").html(this.timeLeft.toString());else{this.clearCountdown();var e=this.$overlay.find(".next a")[0].href;this.redirectTo(e)}},n.prototype.redirectTo=function(e){window.location=e},n.prototype.displayShareTools=function(){$("#custom-endcard").length>0||this.isRailPlayer()?(this.$overlay.find(".next-video-container a").attr("target","_blank"),$(".sharetool").remove()):$.isFunction(this.player.shareTools.setup)&&this.player.shareTools.setup()},n.prototype.endcardFetched=function(e){this.$overlay||(this.player.posterImage&&this.player.posterImage.show(),this.$overlay=$(e),this.setupReplay(),(this.isRailPlayer()||this.isEmbedPlayer())&&(this.settings.allowCountdown=!1),this.settings.allowCountdown?this.setupCountdown():this.$overlay.find(".next-video-container a").attr("target","_blank"),this.displayShareTools(),this.player.el().appendChild(this.$overlay[0]),$(".sharetool").appendTo(".ec-social").show(),this.player.controlBar.hide(),window.picturefill(document.querySelectorAll('.endcard [data-type="image"]')))},n.prototype.pathInfo=function(){return window.location.pathname},n.prototype.isRailPlayer=function(){return!!this.pathInfo().match(/^\/channels\/.+\/rail/)},n.prototype.isEmbedPlayer=function(){return!!this.pathInfo().match(/embed/i)};var r=function(e){var t=this;new n(t,e)};videojs.plugin("endcard",r),e.exports=n},function(e,t,n){var r=n(6),a=function(e,t){this.player=e;var n={};this.settings=$.extend(n,t),this.shareTools=new r};a.prototype.prepareOverlay=function(){var e=$("<div>");return e.addClass("sharetool share-widget"),e.attr({"data-share-url":window.shareUrl,"data-share-description":window.share_description,"data-share-title":window.share_title,"data-share-redirect-url":"http://www.onionstudios.com/fb-close"}),e},a.prototype.setupTwitter=function(e){if(this.settings.twitter){this.shareTools.addNetwork({name:"twitter",url:function(e,t){var n=e.title;n=n.substr(0,139);var r={text:n,url:e.url,via:window.twitter_handle},a=decodeURIComponent($.param(r));return"https://www.twitter.com/share?"+a}});var t=$("<a>");t.attr("title","Share via Twitter"),t.data("trackAction","Share"),t.data("trackLabel","Twitter"),t.addClass("share-twitter button twitter"),e.append(t)}},a.prototype.setupFacebook=function(e){if(this.settings.facebook){this.shareTools.addNetwork({name:"facebook",url:function(e,t){var n={app_id:"632832353489701",display:"popup",link:e.url,name:e.title,description:e.description,image:e.image,redirect_uri:e.redirectUrl},r=decodeURIComponent($.param(n));return"https://www.facebook.com/dialog/feed?"+r}});var t=$("<a>");t.attr("title","Share via Facebook"),t.data("trackAction","Share"),t.data("trackLabel","Facebook"),t.addClass("share-facebook button fb"),e.append(t)}},a.prototype.setupEmbedCode=function(e){if(this.settings.embed){var t=$("<a>");t.addClass("button embed"),t.data("trackAction","Share"),t.data("trackLabel","Embed"),e.append(t)}},a.prototype.setup=function(){this.open=!0;var e=this.prepareOverlay(),t=$('<div class="share-buttons"></div>');this.setupTwitter(t),this.setupFacebook(t),this.setupEmbedCode(t),e.append(t),this.shareTools.setupElements(e),$(this.player.el()).append(e),$(".embed").on("click",function(){$(".embed-div").toggleClass("embed-active")})};var i=function(e){var t=this;t.shareTools=new a(t,e)};videojs.plugin("sharetools",i),e.exports=a},function(e,t,n){n(9);var r=function(e,t){var n={};if(this.player=e,this.settings=$.extend(n,t),!this.settings.id)return void console.warn("Invalid video metrics configuration.  Must contain ID");this.streamingTag=new ns_.StreamingTag({customerC2:this.settings.id});var r=this;e.on("adstart",function(){r.streamingTag.playVideoAdvertisement()}),e.on("adend",function(){r.streamingTag.stop()}),e.on("play",function(){r.isAdPlaying()||r.streamingTag.playVideoContentPart(r.settings.metadata)}),e.on("pause",function(){r.isAdPlaying()||r.streamingTag.stop()}),e.on("ended",function(){r.isAdPlaying()||r.streamingTag.stop()})};r.prototype.isAdPlaying=function(){return this.player.ads&&("ad-playback"===this.player.ads.state||"ads-ready"===this.player.ads.state)};var a=function(e){var t=this;new r(t,e)};videojs.plugin("videometrix",a),e.exports=r}]);
//# sourceMappingURL=videohub-player.js.map